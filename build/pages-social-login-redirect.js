"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[312],{26629:(e,t,r)=>{r.r(t),r.d(t,{default:()=>j});var n=r(10939),a=r(28407),i=r(77810),o=r(34692),c=r(41863),l=r(59146),s=r(69290),u=r(34466),d=r(21052),g=r(65958),p=r(41738),m=r(62345),f=r(84470),y=r(90031),E=r(45495),O=r(5332),b=r(4026),h=r(30056),_=r(1188),v=r(66322);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}const D=()=>{var e;const{formatMessage:t}=(0,o.A)(),r=(0,f.A)(),[D]=(0,E.ok)(),j=(0,y.useAuthHelper)(y.AuthHelpers.LoginIDPUser),{data:B}=(0,O.J)(),P=(0,h.$)(),S=(null===(e=(0,b.getConfig)().app.login.social)||void 0===e?void 0:e.redirectURI)||"",k=(0,_.Bz)(P,S),w=(0,_.Oi)("returnToPage"),z=(0,y.useShopperBasketsMutation)("mergeBasket"),[L,T]=(0,i.useState)("");return(0,i.useEffect)(()=>{D.code&&function(){var e=(0,a.A)(function*(){try{yield j.mutateAsync(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({code:D.code,redirectURI:k},D.usid&&{usid:D.usid}))}catch(e){const r=t(v.gS);T(r)}});return function(){return e.apply(this,arguments)}}()()},[]),(0,i.useEffect)(()=>{null!=B&&B.isRegistered&&((0,_.zU)("returnToPage"),z.mutate({headers:{"Content-Type":"application/json"},parameters:{createDestinationBasket:!0}}),r(w||"/account"))},[null==B?void 0:B.isRegistered]),i.createElement(l.a,{"data-testid":"login-redirect-page",bg:"gray.50",py:[8,16]},i.createElement(s.m,{paddingTop:16,width:["100%","407px"],bg:"white",paddingBottom:14,marginTop:8,marginBottom:8,borderRadius:"base"},L&&i.createElement(u.F,{status:"error",marginBottom:8},i.createElement(m._0,{color:"red.500",boxSize:4}),i.createElement(d.E,{fontSize:"sm",ml:3},L)),i.createElement(g.B,{justify:"center",align:"center",spacing:8,marginBottom:8},i.createElement(p.y,{opacity:.85,color:"blue.600",animationDuration:"0.8s",size:"lg"}),i.createElement(d.E,{align:"center",fontSize:"xl",fontWeight:"semibold"},i.createElement(c.A,{id:"social_login_redirect.message.authenticating",defaultMessage:[{type:0,value:"Authenticating..."}]})),i.createElement(d.E,{align:"center",fontSize:"m"},i.createElement(c.A,{id:"social_login_redirect.message.redirect_link",defaultMessage:[{type:0,value:"If you are not automatically redirected, click "},{type:8,value:"link",children:[{type:0,value:"this link"}]},{type:0,value:" to proceed."}],values:{link:e=>i.createElement("a",{href:"/account",style:{color:"#0176D3",textDecoration:"underline"}},e)}})))))};D.getTemplateName=()=>"social-login-redirect";const j=D}}]);