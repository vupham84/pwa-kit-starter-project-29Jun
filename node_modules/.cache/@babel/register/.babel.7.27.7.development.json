{"{\"assumptions\":{},\"sourceType\":\"unambiguous\",\"sourceRoot\":\"/Users/vupham/pwa-kit-starter-project-29Jun/app/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vupham/pwa-kit-starter-project-29Jun\",\"filename\":\"/Users/vupham/pwa-kit-starter-project-29Jun/app/ssr.js\",\"targets\":{\"android\":\"4.4.0\",\"chrome\":\"135.0.0\",\"ios\":\"9.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vupham/pwa-kit-starter-project-29Jun\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-object-assign\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{},\"options\":{},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$5\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$7\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"idInterpolationPattern\":\"[sha512:contenthash:base64:6]\",\"ast\":true},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$11\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$12\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$16\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$17\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.27.7:development":{"value":{"code":"/*\n * Copyright (c) 2023, Salesforce, Inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\n'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.createRemoteJWKSet = void 0;\nexports.emailLink = emailLink;\nexports.get = void 0;\nexports.jwksCaching = jwksCaching;\nexports.validateSlasCallbackToken = void 0;\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _helmet = _interopRequireDefault(require(\"helmet\"));\nvar _jose = require(\"jose\");\nvar _path = _interopRequireDefault(require(\"path\"));\nvar _express2 = require(\"@salesforce/pwa-kit-runtime/ssr/server/express\");\nvar _middleware = require(\"@salesforce/pwa-kit-runtime/utils/middleware\");\nvar _ssrConfig = require(\"@salesforce/pwa-kit-runtime/utils/ssr-config\");\nvar _url = require(\"@salesforce/pwa-kit-react-sdk/utils/url\");\nvar _config$app$login, _config$app$login$res, _config$app$login2, _config$app$login2$pa;\nconst config = (0, _ssrConfig.getConfig)();\nconst options = {\n  // The build directory (an absolute path)\n  buildDir: _path.default.resolve(process.cwd(), 'build'),\n  // The cache time for SSR'd pages (defaults to 600 seconds)\n  defaultCacheTimeSeconds: 600,\n  // The contents of the config file for the current environment\n  mobify: config,\n  // The port that the local dev server listens on\n  port: 3000,\n  // The protocol on which the development Express app listens.\n  // Note that http://localhost is treated as a secure context for development,\n  // except by Safari.\n  protocol: 'http',\n  // Option for whether to set up a special endpoint for handling\n  // private SLAS clients\n  // Set this to false if using a SLAS public client\n  // When setting this to true, make sure to also set the PWA_KIT_SLAS_CLIENT_SECRET\n  // environment variable as this endpoint will return HTTP 501 if it is not set\n  useSLASPrivateClient: false,\n  // If this is enabled, any HTTP header that has a non ASCII value will be URI encoded\n  // If there any HTTP headers that have been encoded, an additional header will be\n  // passed, `x-encoded-headers`, containing a comma separated list\n  // of the keys of headers that have been encoded\n  // There may be a slight performance loss with requests/responses with large number\n  // of headers as we loop through all the headers to verify ASCII vs non ASCII\n  encodeNonAsciiHttpHeaders: true\n};\nconst runtime = (0, _express2.getRuntime)();\n\n/**\n * Tokens are valid for 20 minutes. We store it at the top level scope to reuse\n * it during the lambda invocation. We'll refresh it after 15 minutes.\n */\nlet marketingCloudToken = '';\nlet marketingCloudTokenExpiration = new Date();\n\n/**\n * Generates a unique ID for the email message.\n *\n * @return {string} A unique ID for the email message.\n */\nfunction generateUniqueId() {\n  return _crypto.default.randomBytes(16).toString('hex');\n}\n\n/**\n * Sends an email to a specified contact using the Marketing Cloud API. The template email must have a\n * `%%magic-link%%` personalization string inserted.\n * https://help.salesforce.com/s/articleView?id=mktg.mc_es_personalization_strings.htm&type=5\n *\n * @param {string} email - The email address of the contact to whom the email will be sent.\n * @param {string} templateId - The ID of the email template to be used for the email.\n * @param {string} magicLink - The magic link to be included in the email.\n *\n * @return {Promise<object>} A promise that resolves to the response object received from the Marketing Cloud API.\n */\nfunction sendMarketingCloudEmail(_x, _x2) {\n  return _sendMarketingCloudEmail.apply(this, arguments);\n}\n/**\n * Generates a unique ID, constructs an email message URL, and sends the email to the specified contact\n * using the Marketing Cloud API.\n *\n * @param {string} email - The email address of the contact to whom the email will be sent.\n * @param {string} templateId - The ID of the email template to be used for the email.\n * @param {string} magicLink - The magic link to be included in the email.\n *\n * @return {Promise<object>} A promise that resolves to the response object received from the Marketing Cloud API.\n */\nfunction _sendMarketingCloudEmail() {\n  _sendMarketingCloudEmail = (0, _asyncToGenerator2.default)(function* (emailId, marketingCloudConfig) {\n    // Refresh token if expired\n    if (new Date() > marketingCloudTokenExpiration) {\n      const {\n        clientId,\n        clientSecret,\n        subdomain\n      } = marketingCloudConfig;\n      const tokenUrl = `https://${subdomain}.auth.marketingcloudapis.com/v2/token`;\n      const tokenResponse = yield fetch(tokenUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          grant_type: 'client_credentials',\n          client_id: clientId,\n          client_secret: clientSecret\n        })\n      });\n      if (!tokenResponse.ok) throw new Error('Failed to fetch Marketing Cloud access token. Check your Marketing Cloud credentials and try again.');\n      const {\n        access_token\n      } = yield tokenResponse.json();\n      marketingCloudToken = access_token;\n      // Set expiration to 15 mins\n      marketingCloudTokenExpiration = new Date(Date.now() + 15 * 60 * 1000);\n    }\n\n    // Send the email\n    const emailUrl = `https://${marketingCloudConfig.subdomain}.rest.marketingcloudapis.com/messaging/v1/email/messages/${generateUniqueId()}`;\n    const emailResponse = yield fetch(emailUrl, {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${marketingCloudToken}`,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        definitionKey: marketingCloudConfig.templateId,\n        recipient: {\n          contactKey: emailId,\n          to: emailId,\n          attributes: {\n            'magic-link': marketingCloudConfig.magicLink\n          }\n        }\n      })\n    });\n    if (!emailResponse.ok) throw new Error('Failed to send email to Marketing Cloud');\n    return yield emailResponse.json();\n  });\n  return _sendMarketingCloudEmail.apply(this, arguments);\n}\nfunction emailLink(_x3, _x4, _x5) {\n  return _emailLink.apply(this, arguments);\n}\nfunction _emailLink() {\n  _emailLink = (0, _asyncToGenerator2.default)(function* (emailId, templateId, magicLink) {\n    if (!process.env.MARKETING_CLOUD_CLIENT_ID) {\n      console.warn('MARKETING_CLOUD_CLIENT_ID is not set in the environment variables.');\n    }\n    if (!process.env.MARKETING_CLOUD_CLIENT_SECRET) {\n      console.warn(' MARKETING_CLOUD_CLIENT_SECRET is not set in the environment variables.');\n    }\n    if (!process.env.MARKETING_CLOUD_SUBDOMAIN) {\n      console.warn('MARKETING_CLOUD_SUBDOMAIN is not set in the environment variables.');\n    }\n    const marketingCloudConfig = {\n      clientId: process.env.MARKETING_CLOUD_CLIENT_ID,\n      clientSecret: process.env.MARKETING_CLOUD_CLIENT_SECRET,\n      magicLink: magicLink,\n      subdomain: process.env.MARKETING_CLOUD_SUBDOMAIN,\n      templateId: templateId\n    };\n    return yield sendMarketingCloudEmail(emailId, marketingCloudConfig);\n  });\n  return _emailLink.apply(this, arguments);\n}\nconst resetPasswordCallback = ((_config$app$login = config.app.login) === null || _config$app$login === void 0 ? void 0 : (_config$app$login$res = _config$app$login.resetPassword) === null || _config$app$login$res === void 0 ? void 0 : _config$app$login$res.callbackURI) || '/reset-password-callback';\nconst passwordlessLoginCallback = ((_config$app$login2 = config.app.login) === null || _config$app$login2 === void 0 ? void 0 : (_config$app$login2$pa = _config$app$login2.passwordless) === null || _config$app$login2$pa === void 0 ? void 0 : _config$app$login2$pa.callbackURI) || '/passwordless-login-callback';\n\n// Reusable function to handle sending a magic link email.\n// By default, this implementation uses Marketing Cloud.\nfunction sendMagicLinkEmail(_x6, _x7, _x8, _x9, _x0) {\n  return _sendMagicLinkEmail.apply(this, arguments);\n}\nfunction _sendMagicLinkEmail() {\n  _sendMagicLinkEmail = (0, _asyncToGenerator2.default)(function* (req, res, landingPath, emailTemplate, redirectUrl) {\n    var _config$app$login5, _config$app$login5$re, _config$app$login6, _config$app$login6$pa;\n    // Extract the base URL from the request\n    const base = req.protocol + '://' + req.get('host');\n\n    // Extract the email_id and token from the request body\n    const {\n      email_id,\n      token\n    } = req.body;\n\n    // Construct the magic link URL\n    let magicLink = `${base}${landingPath}?token=${encodeURIComponent(token)}`;\n    if (landingPath === ((_config$app$login5 = config.app.login) === null || _config$app$login5 === void 0 ? void 0 : (_config$app$login5$re = _config$app$login5.resetPassword) === null || _config$app$login5$re === void 0 ? void 0 : _config$app$login5$re.landingPath)) {\n      // Add email query parameter for reset password flow\n      magicLink += `&email=${encodeURIComponent(email_id)}`;\n    }\n    if (landingPath === ((_config$app$login6 = config.app.login) === null || _config$app$login6 === void 0 ? void 0 : (_config$app$login6$pa = _config$app$login6.passwordless) === null || _config$app$login6$pa === void 0 ? void 0 : _config$app$login6$pa.landingPath) && redirectUrl) {\n      magicLink += `&redirect_url=${encodeURIComponent(redirectUrl)}`;\n    }\n\n    // Call the emailLink function to send an email with the magic link using Marketing Cloud\n    const emailLinkResponse = yield emailLink(email_id, emailTemplate, magicLink);\n\n    // Send the response\n    res.send(emailLinkResponse);\n  });\n  return _sendMagicLinkEmail.apply(this, arguments);\n}\nconst CLAIM = {\n  ISSUER: 'iss'\n};\nconst DELIMITER = {\n  ISSUER: '/'\n};\nconst throwSlasTokenValidationError = (message, code) => {\n  throw new Error(`SLAS Token Validation Error: ${message}`, code);\n};\nconst createRemoteJWKSet = tenantId => {\n  const appOrigin = (0, _url.getAppOrigin)();\n  const {\n    app: appConfig\n  } = (0, _ssrConfig.getConfig)();\n  const shortCode = appConfig.commerceAPI.parameters.shortCode;\n  const configTenantId = appConfig.commerceAPI.parameters.organizationId.replace(/^f_ecom_/, '');\n  if (tenantId !== configTenantId) {\n    throw new Error(`The tenant ID in your PWA Kit configuration (\"${configTenantId}\") does not match the tenant ID in the SLAS callback token (\"${tenantId}\").`);\n  }\n  const JWKS_URI = `${appOrigin}/${shortCode}/${tenantId}/oauth2/jwks`;\n  return (0, _jose.createRemoteJWKSet)(new URL(JWKS_URI));\n};\nexports.createRemoteJWKSet = createRemoteJWKSet;\nconst validateSlasCallbackToken = exports.validateSlasCallbackToken = /*#__PURE__*/function () {\n  var _ref = (0, _asyncToGenerator2.default)(function* (token) {\n    const payload = (0, _jose.decodeJwt)(token);\n    const subClaim = payload[CLAIM.ISSUER];\n    const tokens = subClaim.split(DELIMITER.ISSUER);\n    const tenantId = tokens[2];\n    try {\n      const jwks = createRemoteJWKSet(tenantId);\n      const {\n        payload\n      } = yield (0, _jose.jwtVerify)(token, jwks, {});\n      return payload;\n    } catch (error) {\n      throwSlasTokenValidationError(error.message, 401);\n    }\n  });\n  return function validateSlasCallbackToken(_x1) {\n    return _ref.apply(this, arguments);\n  };\n}();\nconst tenantIdRegExp = /^[a-zA-Z]{4}_([0-9]{3}|s[0-9]{2}|stg|dev|prd)$/;\nconst shortCodeRegExp = /^[a-zA-Z0-9-]+$/;\n\n/**\n *  Handles JWKS (JSON Web Key Set) caching the JWKS response for 2 weeks.\n *\n * @param {object} req Express request object.\n * @param {object} res Express response object.\n * @param {object} options Options for fetching B2C Commerce API JWKS.\n * @param {string} options.shortCode - The Short Code assigned to the realm.\n * @param {string} options.tenantId - The Tenant ID for the ECOM instance.\n * @returns {Promise<*>} Promise with the JWKS data.\n */\nfunction jwksCaching(_x10, _x11, _x12) {\n  return _jwksCaching.apply(this, arguments);\n}\nfunction _jwksCaching() {\n  _jwksCaching = (0, _asyncToGenerator2.default)(function* (req, res, options) {\n    const {\n      shortCode,\n      tenantId\n    } = options;\n    const isValidRequest = tenantIdRegExp.test(tenantId) && shortCodeRegExp.test(shortCode);\n    if (!isValidRequest) return res.status(400).json({\n      error: 'Bad request parameters: Tenant ID or short code is invalid.'\n    });\n    try {\n      const JWKS_URI = `https://${shortCode}.api.commercecloud.salesforce.com/shopper/auth/v1/organizations/f_ecom_${tenantId}/oauth2/jwks`;\n      const response = yield fetch(JWKS_URI);\n      if (!response.ok) {\n        throw new Error('Request failed with status: ' + response.status);\n      }\n\n      // JWKS rotate every 30 days. For now, cache response for 14 days so that\n      // fetches only need to happen twice a month\n      res.set('Cache-Control', 'public, max-age=1209600, stale-while-revalidate=86400');\n      return res.json(yield response.json());\n    } catch (error) {\n      res.status(400).json({\n        error: `Error while fetching data: ${error.message}`\n      });\n    }\n  });\n  return _jwksCaching.apply(this, arguments);\n}\nconst {\n  handler\n} = runtime.createHandler(options, app => {\n  app.use(_express.default.json()); // To parse JSON payloads\n  app.use(_express.default.urlencoded({\n    extended: true\n  }));\n  // Set default HTTP security headers required by PWA Kit\n  app.use(_middleware.defaultPwaKitSecurityHeaders);\n  // Set custom HTTP security headers\n  app.use((0, _helmet.default)({\n    contentSecurityPolicy: {\n      useDefaults: true,\n      directives: {\n        'img-src': [\n        // Default source for product images - replace with your CDN\n        '*.commercecloud.salesforce.com'],\n        'script-src': [\n        // Used by the service worker in /worker/main.js\n        'storage.googleapis.com'],\n        'connect-src': [\n        // Connect to Einstein APIs\n        'api.cquotient.com']\n      }\n    }\n  }));\n\n  // Handle the redirect from SLAS as to avoid error\n  app.get('/callback?*', (req, res) => {\n    // This endpoint does nothing and is not expected to change\n    // Thus we cache it for a year to maximize performance\n    res.set('Cache-Control', `max-age=31536000`);\n    res.send();\n  });\n  app.get('/:shortCode/:tenantId/oauth2/jwks', (req, res) => {\n    jwksCaching(req, res, {\n      shortCode: req.params.shortCode,\n      tenantId: req.params.tenantId\n    });\n  });\n\n  // Handles the passwordless login callback route. SLAS makes a POST request to this\n  // endpoint sending the email address and passwordless token. Then this endpoint calls\n  // the sendMagicLinkEmail function to send an email with the passwordless login magic link.\n  // https://developer.salesforce.com/docs/commerce/commerce-api/guide/slas-passwordless-login.html#receive-the-callback\n  app.post(passwordlessLoginCallback, (req, res) => {\n    const slasCallbackToken = req.headers['x-slas-callback-token'];\n    const redirectUrl = req.query.redirectUrl;\n    validateSlasCallbackToken(slasCallbackToken).then(() => {\n      var _config$app$login3, _config$app$login3$pa;\n      sendMagicLinkEmail(req, res, (_config$app$login3 = config.app.login) === null || _config$app$login3 === void 0 ? void 0 : (_config$app$login3$pa = _config$app$login3.passwordless) === null || _config$app$login3$pa === void 0 ? void 0 : _config$app$login3$pa.landingPath, process.env.MARKETING_CLOUD_PASSWORDLESS_LOGIN_TEMPLATE, redirectUrl);\n    });\n  });\n\n  // Handles the reset password callback route. SLAS makes a POST request to this\n  // endpoint sending the email address and reset password token. Then this endpoint calls\n  // the sendMagicLinkEmail function to send an email with the reset password magic link.\n  // https://developer.salesforce.com/docs/commerce/commerce-api/guide/slas-password-reset.html#slas-password-reset-flow\n  app.post(resetPasswordCallback, (req, res) => {\n    const slasCallbackToken = req.headers['x-slas-callback-token'];\n    validateSlasCallbackToken(slasCallbackToken).then(() => {\n      var _config$app$login4, _config$app$login4$re;\n      sendMagicLinkEmail(req, res, (_config$app$login4 = config.app.login) === null || _config$app$login4 === void 0 ? void 0 : (_config$app$login4$re = _config$app$login4.resetPassword) === null || _config$app$login4$re === void 0 ? void 0 : _config$app$login4$re.landingPath, process.env.MARKETING_CLOUD_RESET_PASSWORD_TEMPLATE);\n    });\n  });\n  app.get('/robots.txt', runtime.serveStaticFile('static/robots.txt'));\n  app.get('/favicon.ico', runtime.serveStaticFile('static/ico/favicon.ico'));\n  app.get('/worker.js(.map)?', runtime.serveServiceWorker);\n  app.get('*', runtime.render);\n});\n// SSR requires that we export a single handler function called 'get', that\n// supports AWS use of the server that we created above.\nconst get = exports.get = handler;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwiY3JlYXRlUmVtb3RlSldLU2V0IiwiZW1haWxMaW5rIiwiZ2V0Iiwiandrc0NhY2hpbmciLCJ2YWxpZGF0ZVNsYXNDYWxsYmFja1Rva2VuIiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiX2NyeXB0byIsIl9leHByZXNzIiwiX2hlbG1ldCIsIl9qb3NlIiwiX3BhdGgiLCJfZXhwcmVzczIiLCJfbWlkZGxld2FyZSIsIl9zc3JDb25maWciLCJfdXJsIiwiX2NvbmZpZyRhcHAkbG9naW4iLCJfY29uZmlnJGFwcCRsb2dpbiRyZXMiLCJfY29uZmlnJGFwcCRsb2dpbjIiLCJfY29uZmlnJGFwcCRsb2dpbjIkcGEiLCJjb25maWciLCJnZXRDb25maWciLCJvcHRpb25zIiwiYnVpbGREaXIiLCJwYXRoIiwicmVzb2x2ZSIsInByb2Nlc3MiLCJjd2QiLCJkZWZhdWx0Q2FjaGVUaW1lU2Vjb25kcyIsIm1vYmlmeSIsInBvcnQiLCJwcm90b2NvbCIsInVzZVNMQVNQcml2YXRlQ2xpZW50IiwiZW5jb2RlTm9uQXNjaWlIdHRwSGVhZGVycyIsInJ1bnRpbWUiLCJnZXRSdW50aW1lIiwibWFya2V0aW5nQ2xvdWRUb2tlbiIsIm1hcmtldGluZ0Nsb3VkVG9rZW5FeHBpcmF0aW9uIiwiRGF0ZSIsImdlbmVyYXRlVW5pcXVlSWQiLCJjcnlwdG8iLCJyYW5kb21CeXRlcyIsInRvU3RyaW5nIiwic2VuZE1hcmtldGluZ0Nsb3VkRW1haWwiLCJfeCIsIl94MiIsIl9zZW5kTWFya2V0aW5nQ2xvdWRFbWFpbCIsImFwcGx5IiwiYXJndW1lbnRzIiwiZGVmYXVsdCIsImVtYWlsSWQiLCJtYXJrZXRpbmdDbG91ZENvbmZpZyIsImNsaWVudElkIiwiY2xpZW50U2VjcmV0Iiwic3ViZG9tYWluIiwidG9rZW5VcmwiLCJ0b2tlblJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJncmFudF90eXBlIiwiY2xpZW50X2lkIiwiY2xpZW50X3NlY3JldCIsIm9rIiwiRXJyb3IiLCJhY2Nlc3NfdG9rZW4iLCJqc29uIiwibm93IiwiZW1haWxVcmwiLCJlbWFpbFJlc3BvbnNlIiwiQXV0aG9yaXphdGlvbiIsImRlZmluaXRpb25LZXkiLCJ0ZW1wbGF0ZUlkIiwicmVjaXBpZW50IiwiY29udGFjdEtleSIsInRvIiwiYXR0cmlidXRlcyIsIm1hZ2ljTGluayIsIl94MyIsIl94NCIsIl94NSIsIl9lbWFpbExpbmsiLCJlbnYiLCJNQVJLRVRJTkdfQ0xPVURfQ0xJRU5UX0lEIiwiY29uc29sZSIsIndhcm4iLCJNQVJLRVRJTkdfQ0xPVURfQ0xJRU5UX1NFQ1JFVCIsIk1BUktFVElOR19DTE9VRF9TVUJET01BSU4iLCJyZXNldFBhc3N3b3JkQ2FsbGJhY2siLCJhcHAiLCJsb2dpbiIsInJlc2V0UGFzc3dvcmQiLCJjYWxsYmFja1VSSSIsInBhc3N3b3JkbGVzc0xvZ2luQ2FsbGJhY2siLCJwYXNzd29yZGxlc3MiLCJzZW5kTWFnaWNMaW5rRW1haWwiLCJfeDYiLCJfeDciLCJfeDgiLCJfeDkiLCJfeDAiLCJfc2VuZE1hZ2ljTGlua0VtYWlsIiwicmVxIiwicmVzIiwibGFuZGluZ1BhdGgiLCJlbWFpbFRlbXBsYXRlIiwicmVkaXJlY3RVcmwiLCJfY29uZmlnJGFwcCRsb2dpbjUiLCJfY29uZmlnJGFwcCRsb2dpbjUkcmUiLCJfY29uZmlnJGFwcCRsb2dpbjYiLCJfY29uZmlnJGFwcCRsb2dpbjYkcGEiLCJiYXNlIiwiZW1haWxfaWQiLCJ0b2tlbiIsImVuY29kZVVSSUNvbXBvbmVudCIsImVtYWlsTGlua1Jlc3BvbnNlIiwic2VuZCIsIkNMQUlNIiwiSVNTVUVSIiwiREVMSU1JVEVSIiwidGhyb3dTbGFzVG9rZW5WYWxpZGF0aW9uRXJyb3IiLCJtZXNzYWdlIiwiY29kZSIsInRlbmFudElkIiwiYXBwT3JpZ2luIiwiZ2V0QXBwT3JpZ2luIiwiYXBwQ29uZmlnIiwic2hvcnRDb2RlIiwiY29tbWVyY2VBUEkiLCJwYXJhbWV0ZXJzIiwiY29uZmlnVGVuYW50SWQiLCJvcmdhbml6YXRpb25JZCIsInJlcGxhY2UiLCJKV0tTX1VSSSIsImpvc2VDcmVhdGVSZW1vdGVKV0tTZXQiLCJVUkwiLCJfcmVmIiwicGF5bG9hZCIsImRlY29kZUp3dCIsInN1YkNsYWltIiwidG9rZW5zIiwic3BsaXQiLCJqd2tzIiwiand0VmVyaWZ5IiwiZXJyb3IiLCJfeDEiLCJ0ZW5hbnRJZFJlZ0V4cCIsInNob3J0Q29kZVJlZ0V4cCIsIl94MTAiLCJfeDExIiwiX3gxMiIsIl9qd2tzQ2FjaGluZyIsImlzVmFsaWRSZXF1ZXN0IiwidGVzdCIsInN0YXR1cyIsInJlc3BvbnNlIiwic2V0IiwiaGFuZGxlciIsImNyZWF0ZUhhbmRsZXIiLCJ1c2UiLCJleHByZXNzIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwiZGVmYXVsdFB3YUtpdFNlY3VyaXR5SGVhZGVycyIsImhlbG1ldCIsImNvbnRlbnRTZWN1cml0eVBvbGljeSIsInVzZURlZmF1bHRzIiwiZGlyZWN0aXZlcyIsInBhcmFtcyIsInBvc3QiLCJzbGFzQ2FsbGJhY2tUb2tlbiIsInF1ZXJ5IiwidGhlbiIsIl9jb25maWckYXBwJGxvZ2luMyIsIl9jb25maWckYXBwJGxvZ2luMyRwYSIsIk1BUktFVElOR19DTE9VRF9QQVNTV09SRExFU1NfTE9HSU5fVEVNUExBVEUiLCJfY29uZmlnJGFwcCRsb2dpbjQiLCJfY29uZmlnJGFwcCRsb2dpbjQkcmUiLCJNQVJLRVRJTkdfQ0xPVURfUkVTRVRfUEFTU1dPUkRfVEVNUExBVEUiLCJzZXJ2ZVN0YXRpY0ZpbGUiLCJzZXJ2ZVNlcnZpY2VXb3JrZXIiLCJyZW5kZXIiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dXBoYW0vcHdhLWtpdC1zdGFydGVyLXByb2plY3QtMjlKdW4vYXBwLyIsInNvdXJjZXMiOlsic3NyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjMsIFNhbGVzZm9yY2UsIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQlNELTMtQ2xhdXNlXG4gKiBGb3IgZnVsbCBsaWNlbnNlIHRleHQsIHNlZSB0aGUgTElDRU5TRSBmaWxlIGluIHRoZSByZXBvIHJvb3Qgb3IgaHR0cHM6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9CU0QtMy1DbGF1c2VcbiAqL1xuXG4ndXNlIHN0cmljdCdcblxuaW1wb3J0IGNyeXB0byBmcm9tICdjcnlwdG8nXG5pbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJ1xuaW1wb3J0IGhlbG1ldCBmcm9tICdoZWxtZXQnXG5pbXBvcnQge2NyZWF0ZVJlbW90ZUpXS1NldCBhcyBqb3NlQ3JlYXRlUmVtb3RlSldLU2V0LCBqd3RWZXJpZnksIGRlY29kZUp3dH0gZnJvbSAnam9zZSdcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnXG5pbXBvcnQge2dldFJ1bnRpbWV9IGZyb20gJ0BzYWxlc2ZvcmNlL3B3YS1raXQtcnVudGltZS9zc3Ivc2VydmVyL2V4cHJlc3MnXG5pbXBvcnQge2RlZmF1bHRQd2FLaXRTZWN1cml0eUhlYWRlcnN9IGZyb20gJ0BzYWxlc2ZvcmNlL3B3YS1raXQtcnVudGltZS91dGlscy9taWRkbGV3YXJlJ1xuaW1wb3J0IHtnZXRDb25maWd9IGZyb20gJ0BzYWxlc2ZvcmNlL3B3YS1raXQtcnVudGltZS91dGlscy9zc3ItY29uZmlnJ1xuaW1wb3J0IHtnZXRBcHBPcmlnaW59IGZyb20gJ0BzYWxlc2ZvcmNlL3B3YS1raXQtcmVhY3Qtc2RrL3V0aWxzL3VybCdcblxuY29uc3QgY29uZmlnID0gZ2V0Q29uZmlnKClcblxuY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAvLyBUaGUgYnVpbGQgZGlyZWN0b3J5IChhbiBhYnNvbHV0ZSBwYXRoKVxuICAgIGJ1aWxkRGlyOiBwYXRoLnJlc29sdmUocHJvY2Vzcy5jd2QoKSwgJ2J1aWxkJyksXG5cbiAgICAvLyBUaGUgY2FjaGUgdGltZSBmb3IgU1NSJ2QgcGFnZXMgKGRlZmF1bHRzIHRvIDYwMCBzZWNvbmRzKVxuICAgIGRlZmF1bHRDYWNoZVRpbWVTZWNvbmRzOiA2MDAsXG5cbiAgICAvLyBUaGUgY29udGVudHMgb2YgdGhlIGNvbmZpZyBmaWxlIGZvciB0aGUgY3VycmVudCBlbnZpcm9ubWVudFxuICAgIG1vYmlmeTogY29uZmlnLFxuXG4gICAgLy8gVGhlIHBvcnQgdGhhdCB0aGUgbG9jYWwgZGV2IHNlcnZlciBsaXN0ZW5zIG9uXG4gICAgcG9ydDogMzAwMCxcblxuICAgIC8vIFRoZSBwcm90b2NvbCBvbiB3aGljaCB0aGUgZGV2ZWxvcG1lbnQgRXhwcmVzcyBhcHAgbGlzdGVucy5cbiAgICAvLyBOb3RlIHRoYXQgaHR0cDovL2xvY2FsaG9zdCBpcyB0cmVhdGVkIGFzIGEgc2VjdXJlIGNvbnRleHQgZm9yIGRldmVsb3BtZW50LFxuICAgIC8vIGV4Y2VwdCBieSBTYWZhcmkuXG4gICAgcHJvdG9jb2w6ICdodHRwJyxcblxuICAgIC8vIE9wdGlvbiBmb3Igd2hldGhlciB0byBzZXQgdXAgYSBzcGVjaWFsIGVuZHBvaW50IGZvciBoYW5kbGluZ1xuICAgIC8vIHByaXZhdGUgU0xBUyBjbGllbnRzXG4gICAgLy8gU2V0IHRoaXMgdG8gZmFsc2UgaWYgdXNpbmcgYSBTTEFTIHB1YmxpYyBjbGllbnRcbiAgICAvLyBXaGVuIHNldHRpbmcgdGhpcyB0byB0cnVlLCBtYWtlIHN1cmUgdG8gYWxzbyBzZXQgdGhlIFBXQV9LSVRfU0xBU19DTElFTlRfU0VDUkVUXG4gICAgLy8gZW52aXJvbm1lbnQgdmFyaWFibGUgYXMgdGhpcyBlbmRwb2ludCB3aWxsIHJldHVybiBIVFRQIDUwMSBpZiBpdCBpcyBub3Qgc2V0XG4gICAgdXNlU0xBU1ByaXZhdGVDbGllbnQ6IGZhbHNlLFxuXG4gICAgLy8gSWYgdGhpcyBpcyBlbmFibGVkLCBhbnkgSFRUUCBoZWFkZXIgdGhhdCBoYXMgYSBub24gQVNDSUkgdmFsdWUgd2lsbCBiZSBVUkkgZW5jb2RlZFxuICAgIC8vIElmIHRoZXJlIGFueSBIVFRQIGhlYWRlcnMgdGhhdCBoYXZlIGJlZW4gZW5jb2RlZCwgYW4gYWRkaXRpb25hbCBoZWFkZXIgd2lsbCBiZVxuICAgIC8vIHBhc3NlZCwgYHgtZW5jb2RlZC1oZWFkZXJzYCwgY29udGFpbmluZyBhIGNvbW1hIHNlcGFyYXRlZCBsaXN0XG4gICAgLy8gb2YgdGhlIGtleXMgb2YgaGVhZGVycyB0aGF0IGhhdmUgYmVlbiBlbmNvZGVkXG4gICAgLy8gVGhlcmUgbWF5IGJlIGEgc2xpZ2h0IHBlcmZvcm1hbmNlIGxvc3Mgd2l0aCByZXF1ZXN0cy9yZXNwb25zZXMgd2l0aCBsYXJnZSBudW1iZXJcbiAgICAvLyBvZiBoZWFkZXJzIGFzIHdlIGxvb3AgdGhyb3VnaCBhbGwgdGhlIGhlYWRlcnMgdG8gdmVyaWZ5IEFTQ0lJIHZzIG5vbiBBU0NJSVxuICAgIGVuY29kZU5vbkFzY2lpSHR0cEhlYWRlcnM6IHRydWVcbn1cblxuY29uc3QgcnVudGltZSA9IGdldFJ1bnRpbWUoKVxuXG4vKipcbiAqIFRva2VucyBhcmUgdmFsaWQgZm9yIDIwIG1pbnV0ZXMuIFdlIHN0b3JlIGl0IGF0IHRoZSB0b3AgbGV2ZWwgc2NvcGUgdG8gcmV1c2VcbiAqIGl0IGR1cmluZyB0aGUgbGFtYmRhIGludm9jYXRpb24uIFdlJ2xsIHJlZnJlc2ggaXQgYWZ0ZXIgMTUgbWludXRlcy5cbiAqL1xubGV0IG1hcmtldGluZ0Nsb3VkVG9rZW4gPSAnJ1xubGV0IG1hcmtldGluZ0Nsb3VkVG9rZW5FeHBpcmF0aW9uID0gbmV3IERhdGUoKVxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHVuaXF1ZSBJRCBmb3IgdGhlIGVtYWlsIG1lc3NhZ2UuXG4gKlxuICogQHJldHVybiB7c3RyaW5nfSBBIHVuaXF1ZSBJRCBmb3IgdGhlIGVtYWlsIG1lc3NhZ2UuXG4gKi9cbmZ1bmN0aW9uIGdlbmVyYXRlVW5pcXVlSWQoKSB7XG4gICAgcmV0dXJuIGNyeXB0by5yYW5kb21CeXRlcygxNikudG9TdHJpbmcoJ2hleCcpXG59XG5cbi8qKlxuICogU2VuZHMgYW4gZW1haWwgdG8gYSBzcGVjaWZpZWQgY29udGFjdCB1c2luZyB0aGUgTWFya2V0aW5nIENsb3VkIEFQSS4gVGhlIHRlbXBsYXRlIGVtYWlsIG11c3QgaGF2ZSBhXG4gKiBgJSVtYWdpYy1saW5rJSVgIHBlcnNvbmFsaXphdGlvbiBzdHJpbmcgaW5zZXJ0ZWQuXG4gKiBodHRwczovL2hlbHAuc2FsZXNmb3JjZS5jb20vcy9hcnRpY2xlVmlldz9pZD1ta3RnLm1jX2VzX3BlcnNvbmFsaXphdGlvbl9zdHJpbmdzLmh0bSZ0eXBlPTVcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZW1haWwgLSBUaGUgZW1haWwgYWRkcmVzcyBvZiB0aGUgY29udGFjdCB0byB3aG9tIHRoZSBlbWFpbCB3aWxsIGJlIHNlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdGVtcGxhdGVJZCAtIFRoZSBJRCBvZiB0aGUgZW1haWwgdGVtcGxhdGUgdG8gYmUgdXNlZCBmb3IgdGhlIGVtYWlsLlxuICogQHBhcmFtIHtzdHJpbmd9IG1hZ2ljTGluayAtIFRoZSBtYWdpYyBsaW5rIHRvIGJlIGluY2x1ZGVkIGluIHRoZSBlbWFpbC5cbiAqXG4gKiBAcmV0dXJuIHtQcm9taXNlPG9iamVjdD59IEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSByZXNwb25zZSBvYmplY3QgcmVjZWl2ZWQgZnJvbSB0aGUgTWFya2V0aW5nIENsb3VkIEFQSS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gc2VuZE1hcmtldGluZ0Nsb3VkRW1haWwoZW1haWxJZCwgbWFya2V0aW5nQ2xvdWRDb25maWcpIHtcbiAgICAvLyBSZWZyZXNoIHRva2VuIGlmIGV4cGlyZWRcbiAgICBpZiAobmV3IERhdGUoKSA+IG1hcmtldGluZ0Nsb3VkVG9rZW5FeHBpcmF0aW9uKSB7XG4gICAgICAgIGNvbnN0IHtjbGllbnRJZCwgY2xpZW50U2VjcmV0LCBzdWJkb21haW59ID0gbWFya2V0aW5nQ2xvdWRDb25maWdcbiAgICAgICAgY29uc3QgdG9rZW5VcmwgPSBgaHR0cHM6Ly8ke3N1YmRvbWFpbn0uYXV0aC5tYXJrZXRpbmdjbG91ZGFwaXMuY29tL3YyL3Rva2VuYFxuICAgICAgICBjb25zdCB0b2tlblJlc3BvbnNlID0gYXdhaXQgZmV0Y2godG9rZW5VcmwsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVyczogeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIGdyYW50X3R5cGU6ICdjbGllbnRfY3JlZGVudGlhbHMnLFxuICAgICAgICAgICAgICAgIGNsaWVudF9pZDogY2xpZW50SWQsXG4gICAgICAgICAgICAgICAgY2xpZW50X3NlY3JldDogY2xpZW50U2VjcmV0XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZS5vaylcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICAnRmFpbGVkIHRvIGZldGNoIE1hcmtldGluZyBDbG91ZCBhY2Nlc3MgdG9rZW4uIENoZWNrIHlvdXIgTWFya2V0aW5nIENsb3VkIGNyZWRlbnRpYWxzIGFuZCB0cnkgYWdhaW4uJ1xuICAgICAgICAgICAgKVxuXG4gICAgICAgIGNvbnN0IHthY2Nlc3NfdG9rZW59ID0gYXdhaXQgdG9rZW5SZXNwb25zZS5qc29uKClcbiAgICAgICAgbWFya2V0aW5nQ2xvdWRUb2tlbiA9IGFjY2Vzc190b2tlblxuICAgICAgICAvLyBTZXQgZXhwaXJhdGlvbiB0byAxNSBtaW5zXG4gICAgICAgIG1hcmtldGluZ0Nsb3VkVG9rZW5FeHBpcmF0aW9uID0gbmV3IERhdGUoRGF0ZS5ub3coKSArIDE1ICogNjAgKiAxMDAwKVxuICAgIH1cblxuICAgIC8vIFNlbmQgdGhlIGVtYWlsXG4gICAgY29uc3QgZW1haWxVcmwgPSBgaHR0cHM6Ly8ke1xuICAgICAgICBtYXJrZXRpbmdDbG91ZENvbmZpZy5zdWJkb21haW5cbiAgICB9LnJlc3QubWFya2V0aW5nY2xvdWRhcGlzLmNvbS9tZXNzYWdpbmcvdjEvZW1haWwvbWVzc2FnZXMvJHtnZW5lcmF0ZVVuaXF1ZUlkKCl9YFxuICAgIGNvbnN0IGVtYWlsUmVzcG9uc2UgPSBhd2FpdCBmZXRjaChlbWFpbFVybCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke21hcmtldGluZ0Nsb3VkVG9rZW59YCxcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgZGVmaW5pdGlvbktleTogbWFya2V0aW5nQ2xvdWRDb25maWcudGVtcGxhdGVJZCxcbiAgICAgICAgICAgIHJlY2lwaWVudDoge1xuICAgICAgICAgICAgICAgIGNvbnRhY3RLZXk6IGVtYWlsSWQsXG4gICAgICAgICAgICAgICAgdG86IGVtYWlsSWQsXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlczogeydtYWdpYy1saW5rJzogbWFya2V0aW5nQ2xvdWRDb25maWcubWFnaWNMaW5rfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICBpZiAoIWVtYWlsUmVzcG9uc2Uub2spIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHNlbmQgZW1haWwgdG8gTWFya2V0aW5nIENsb3VkJylcblxuICAgIHJldHVybiBhd2FpdCBlbWFpbFJlc3BvbnNlLmpzb24oKVxufVxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHVuaXF1ZSBJRCwgY29uc3RydWN0cyBhbiBlbWFpbCBtZXNzYWdlIFVSTCwgYW5kIHNlbmRzIHRoZSBlbWFpbCB0byB0aGUgc3BlY2lmaWVkIGNvbnRhY3RcbiAqIHVzaW5nIHRoZSBNYXJrZXRpbmcgQ2xvdWQgQVBJLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBlbWFpbCAtIFRoZSBlbWFpbCBhZGRyZXNzIG9mIHRoZSBjb250YWN0IHRvIHdob20gdGhlIGVtYWlsIHdpbGwgYmUgc2VudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZW1wbGF0ZUlkIC0gVGhlIElEIG9mIHRoZSBlbWFpbCB0ZW1wbGF0ZSB0byBiZSB1c2VkIGZvciB0aGUgZW1haWwuXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFnaWNMaW5rIC0gVGhlIG1hZ2ljIGxpbmsgdG8gYmUgaW5jbHVkZWQgaW4gdGhlIGVtYWlsLlxuICpcbiAqIEByZXR1cm4ge1Byb21pc2U8b2JqZWN0Pn0gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIHJlc3BvbnNlIG9iamVjdCByZWNlaXZlZCBmcm9tIHRoZSBNYXJrZXRpbmcgQ2xvdWQgQVBJLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZW1haWxMaW5rKGVtYWlsSWQsIHRlbXBsYXRlSWQsIG1hZ2ljTGluaykge1xuICAgIGlmICghcHJvY2Vzcy5lbnYuTUFSS0VUSU5HX0NMT1VEX0NMSUVOVF9JRCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ01BUktFVElOR19DTE9VRF9DTElFTlRfSUQgaXMgbm90IHNldCBpbiB0aGUgZW52aXJvbm1lbnQgdmFyaWFibGVzLicpXG4gICAgfVxuXG4gICAgaWYgKCFwcm9jZXNzLmVudi5NQVJLRVRJTkdfQ0xPVURfQ0xJRU5UX1NFQ1JFVCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJyBNQVJLRVRJTkdfQ0xPVURfQ0xJRU5UX1NFQ1JFVCBpcyBub3Qgc2V0IGluIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZXMuJylcbiAgICB9XG5cbiAgICBpZiAoIXByb2Nlc3MuZW52Lk1BUktFVElOR19DTE9VRF9TVUJET01BSU4pIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdNQVJLRVRJTkdfQ0xPVURfU1VCRE9NQUlOIGlzIG5vdCBzZXQgaW4gdGhlIGVudmlyb25tZW50IHZhcmlhYmxlcy4nKVxuICAgIH1cblxuICAgIGNvbnN0IG1hcmtldGluZ0Nsb3VkQ29uZmlnID0ge1xuICAgICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuTUFSS0VUSU5HX0NMT1VEX0NMSUVOVF9JRCxcbiAgICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5NQVJLRVRJTkdfQ0xPVURfQ0xJRU5UX1NFQ1JFVCxcbiAgICAgICAgbWFnaWNMaW5rOiBtYWdpY0xpbmssXG4gICAgICAgIHN1YmRvbWFpbjogcHJvY2Vzcy5lbnYuTUFSS0VUSU5HX0NMT1VEX1NVQkRPTUFJTixcbiAgICAgICAgdGVtcGxhdGVJZDogdGVtcGxhdGVJZFxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgc2VuZE1hcmtldGluZ0Nsb3VkRW1haWwoZW1haWxJZCwgbWFya2V0aW5nQ2xvdWRDb25maWcpXG59XG5cbmNvbnN0IHJlc2V0UGFzc3dvcmRDYWxsYmFjayA9XG4gICAgY29uZmlnLmFwcC5sb2dpbj8ucmVzZXRQYXNzd29yZD8uY2FsbGJhY2tVUkkgfHwgJy9yZXNldC1wYXNzd29yZC1jYWxsYmFjaydcbmNvbnN0IHBhc3N3b3JkbGVzc0xvZ2luQ2FsbGJhY2sgPVxuICAgIGNvbmZpZy5hcHAubG9naW4/LnBhc3N3b3JkbGVzcz8uY2FsbGJhY2tVUkkgfHwgJy9wYXNzd29yZGxlc3MtbG9naW4tY2FsbGJhY2snXG5cbi8vIFJldXNhYmxlIGZ1bmN0aW9uIHRvIGhhbmRsZSBzZW5kaW5nIGEgbWFnaWMgbGluayBlbWFpbC5cbi8vIEJ5IGRlZmF1bHQsIHRoaXMgaW1wbGVtZW50YXRpb24gdXNlcyBNYXJrZXRpbmcgQ2xvdWQuXG5hc3luYyBmdW5jdGlvbiBzZW5kTWFnaWNMaW5rRW1haWwocmVxLCByZXMsIGxhbmRpbmdQYXRoLCBlbWFpbFRlbXBsYXRlLCByZWRpcmVjdFVybCkge1xuICAgIC8vIEV4dHJhY3QgdGhlIGJhc2UgVVJMIGZyb20gdGhlIHJlcXVlc3RcbiAgICBjb25zdCBiYXNlID0gcmVxLnByb3RvY29sICsgJzovLycgKyByZXEuZ2V0KCdob3N0JylcblxuICAgIC8vIEV4dHJhY3QgdGhlIGVtYWlsX2lkIGFuZCB0b2tlbiBmcm9tIHRoZSByZXF1ZXN0IGJvZHlcbiAgICBjb25zdCB7ZW1haWxfaWQsIHRva2VufSA9IHJlcS5ib2R5XG5cbiAgICAvLyBDb25zdHJ1Y3QgdGhlIG1hZ2ljIGxpbmsgVVJMXG4gICAgbGV0IG1hZ2ljTGluayA9IGAke2Jhc2V9JHtsYW5kaW5nUGF0aH0/dG9rZW49JHtlbmNvZGVVUklDb21wb25lbnQodG9rZW4pfWBcbiAgICBpZiAobGFuZGluZ1BhdGggPT09IGNvbmZpZy5hcHAubG9naW4/LnJlc2V0UGFzc3dvcmQ/LmxhbmRpbmdQYXRoKSB7XG4gICAgICAgIC8vIEFkZCBlbWFpbCBxdWVyeSBwYXJhbWV0ZXIgZm9yIHJlc2V0IHBhc3N3b3JkIGZsb3dcbiAgICAgICAgbWFnaWNMaW5rICs9IGAmZW1haWw9JHtlbmNvZGVVUklDb21wb25lbnQoZW1haWxfaWQpfWBcbiAgICB9XG4gICAgaWYgKGxhbmRpbmdQYXRoID09PSBjb25maWcuYXBwLmxvZ2luPy5wYXNzd29yZGxlc3M/LmxhbmRpbmdQYXRoICYmIHJlZGlyZWN0VXJsKSB7XG4gICAgICAgIG1hZ2ljTGluayArPSBgJnJlZGlyZWN0X3VybD0ke2VuY29kZVVSSUNvbXBvbmVudChyZWRpcmVjdFVybCl9YFxuICAgIH1cblxuICAgIC8vIENhbGwgdGhlIGVtYWlsTGluayBmdW5jdGlvbiB0byBzZW5kIGFuIGVtYWlsIHdpdGggdGhlIG1hZ2ljIGxpbmsgdXNpbmcgTWFya2V0aW5nIENsb3VkXG4gICAgY29uc3QgZW1haWxMaW5rUmVzcG9uc2UgPSBhd2FpdCBlbWFpbExpbmsoZW1haWxfaWQsIGVtYWlsVGVtcGxhdGUsIG1hZ2ljTGluaylcblxuICAgIC8vIFNlbmQgdGhlIHJlc3BvbnNlXG4gICAgcmVzLnNlbmQoZW1haWxMaW5rUmVzcG9uc2UpXG59XG5cbmNvbnN0IENMQUlNID0ge1xuICAgIElTU1VFUjogJ2lzcydcbn1cblxuY29uc3QgREVMSU1JVEVSID0ge1xuICAgIElTU1VFUjogJy8nXG59XG5cbmNvbnN0IHRocm93U2xhc1Rva2VuVmFsaWRhdGlvbkVycm9yID0gKG1lc3NhZ2UsIGNvZGUpID0+IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFNMQVMgVG9rZW4gVmFsaWRhdGlvbiBFcnJvcjogJHttZXNzYWdlfWAsIGNvZGUpXG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVSZW1vdGVKV0tTZXQgPSAodGVuYW50SWQpID0+IHtcbiAgICBjb25zdCBhcHBPcmlnaW4gPSBnZXRBcHBPcmlnaW4oKVxuICAgIGNvbnN0IHthcHA6IGFwcENvbmZpZ30gPSBnZXRDb25maWcoKVxuICAgIGNvbnN0IHNob3J0Q29kZSA9IGFwcENvbmZpZy5jb21tZXJjZUFQSS5wYXJhbWV0ZXJzLnNob3J0Q29kZVxuICAgIGNvbnN0IGNvbmZpZ1RlbmFudElkID0gYXBwQ29uZmlnLmNvbW1lcmNlQVBJLnBhcmFtZXRlcnMub3JnYW5pemF0aW9uSWQucmVwbGFjZSgvXmZfZWNvbV8vLCAnJylcbiAgICBpZiAodGVuYW50SWQgIT09IGNvbmZpZ1RlbmFudElkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgIGBUaGUgdGVuYW50IElEIGluIHlvdXIgUFdBIEtpdCBjb25maWd1cmF0aW9uIChcIiR7Y29uZmlnVGVuYW50SWR9XCIpIGRvZXMgbm90IG1hdGNoIHRoZSB0ZW5hbnQgSUQgaW4gdGhlIFNMQVMgY2FsbGJhY2sgdG9rZW4gKFwiJHt0ZW5hbnRJZH1cIikuYFxuICAgICAgICApXG4gICAgfVxuICAgIGNvbnN0IEpXS1NfVVJJID0gYCR7YXBwT3JpZ2lufS8ke3Nob3J0Q29kZX0vJHt0ZW5hbnRJZH0vb2F1dGgyL2p3a3NgXG4gICAgcmV0dXJuIGpvc2VDcmVhdGVSZW1vdGVKV0tTZXQobmV3IFVSTChKV0tTX1VSSSkpXG59XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0ZVNsYXNDYWxsYmFja1Rva2VuID0gYXN5bmMgKHRva2VuKSA9PiB7XG4gICAgY29uc3QgcGF5bG9hZCA9IGRlY29kZUp3dCh0b2tlbilcbiAgICBjb25zdCBzdWJDbGFpbSA9IHBheWxvYWRbQ0xBSU0uSVNTVUVSXVxuICAgIGNvbnN0IHRva2VucyA9IHN1YkNsYWltLnNwbGl0KERFTElNSVRFUi5JU1NVRVIpXG4gICAgY29uc3QgdGVuYW50SWQgPSB0b2tlbnNbMl1cbiAgICB0cnkge1xuICAgICAgICBjb25zdCBqd2tzID0gY3JlYXRlUmVtb3RlSldLU2V0KHRlbmFudElkKVxuICAgICAgICBjb25zdCB7cGF5bG9hZH0gPSBhd2FpdCBqd3RWZXJpZnkodG9rZW4sIGp3a3MsIHt9KVxuICAgICAgICByZXR1cm4gcGF5bG9hZFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRocm93U2xhc1Rva2VuVmFsaWRhdGlvbkVycm9yKGVycm9yLm1lc3NhZ2UsIDQwMSlcbiAgICB9XG59XG5cbmNvbnN0IHRlbmFudElkUmVnRXhwID0gL15bYS16QS1aXXs0fV8oWzAtOV17M318c1swLTldezJ9fHN0Z3xkZXZ8cHJkKSQvXG5jb25zdCBzaG9ydENvZGVSZWdFeHAgPSAvXlthLXpBLVowLTktXSskL1xuXG4vKipcbiAqICBIYW5kbGVzIEpXS1MgKEpTT04gV2ViIEtleSBTZXQpIGNhY2hpbmcgdGhlIEpXS1MgcmVzcG9uc2UgZm9yIDIgd2Vla3MuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IHJlcSBFeHByZXNzIHJlcXVlc3Qgb2JqZWN0LlxuICogQHBhcmFtIHtvYmplY3R9IHJlcyBFeHByZXNzIHJlc3BvbnNlIG9iamVjdC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zIE9wdGlvbnMgZm9yIGZldGNoaW5nIEIyQyBDb21tZXJjZSBBUEkgSldLUy5cbiAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnNob3J0Q29kZSAtIFRoZSBTaG9ydCBDb2RlIGFzc2lnbmVkIHRvIHRoZSByZWFsbS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBvcHRpb25zLnRlbmFudElkIC0gVGhlIFRlbmFudCBJRCBmb3IgdGhlIEVDT00gaW5zdGFuY2UuXG4gKiBAcmV0dXJucyB7UHJvbWlzZTwqPn0gUHJvbWlzZSB3aXRoIHRoZSBKV0tTIGRhdGEuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBqd2tzQ2FjaGluZyhyZXEsIHJlcywgb3B0aW9ucykge1xuICAgIGNvbnN0IHtzaG9ydENvZGUsIHRlbmFudElkfSA9IG9wdGlvbnNcblxuICAgIGNvbnN0IGlzVmFsaWRSZXF1ZXN0ID0gdGVuYW50SWRSZWdFeHAudGVzdCh0ZW5hbnRJZCkgJiYgc2hvcnRDb2RlUmVnRXhwLnRlc3Qoc2hvcnRDb2RlKVxuICAgIGlmICghaXNWYWxpZFJlcXVlc3QpXG4gICAgICAgIHJldHVybiByZXNcbiAgICAgICAgICAgIC5zdGF0dXMoNDAwKVxuICAgICAgICAgICAgLmpzb24oe2Vycm9yOiAnQmFkIHJlcXVlc3QgcGFyYW1ldGVyczogVGVuYW50IElEIG9yIHNob3J0IGNvZGUgaXMgaW52YWxpZC4nfSlcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBKV0tTX1VSSSA9IGBodHRwczovLyR7c2hvcnRDb2RlfS5hcGkuY29tbWVyY2VjbG91ZC5zYWxlc2ZvcmNlLmNvbS9zaG9wcGVyL2F1dGgvdjEvb3JnYW5pemF0aW9ucy9mX2Vjb21fJHt0ZW5hbnRJZH0vb2F1dGgyL2p3a3NgXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goSldLU19VUkkpXG5cbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1ZXN0IGZhaWxlZCB3aXRoIHN0YXR1czogJyArIHJlc3BvbnNlLnN0YXR1cylcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEpXS1Mgcm90YXRlIGV2ZXJ5IDMwIGRheXMuIEZvciBub3csIGNhY2hlIHJlc3BvbnNlIGZvciAxNCBkYXlzIHNvIHRoYXRcbiAgICAgICAgLy8gZmV0Y2hlcyBvbmx5IG5lZWQgdG8gaGFwcGVuIHR3aWNlIGEgbW9udGhcbiAgICAgICAgcmVzLnNldCgnQ2FjaGUtQ29udHJvbCcsICdwdWJsaWMsIG1heC1hZ2U9MTIwOTYwMCwgc3RhbGUtd2hpbGUtcmV2YWxpZGF0ZT04NjQwMCcpXG5cbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKGF3YWl0IHJlc3BvbnNlLmpzb24oKSlcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICByZXMuc3RhdHVzKDQwMCkuanNvbih7ZXJyb3I6IGBFcnJvciB3aGlsZSBmZXRjaGluZyBkYXRhOiAke2Vycm9yLm1lc3NhZ2V9YH0pXG4gICAgfVxufVxuXG5jb25zdCB7aGFuZGxlcn0gPSBydW50aW1lLmNyZWF0ZUhhbmRsZXIob3B0aW9ucywgKGFwcCkgPT4ge1xuICAgIGFwcC51c2UoZXhwcmVzcy5qc29uKCkpIC8vIFRvIHBhcnNlIEpTT04gcGF5bG9hZHNcbiAgICBhcHAudXNlKGV4cHJlc3MudXJsZW5jb2RlZCh7ZXh0ZW5kZWQ6IHRydWV9KSlcbiAgICAvLyBTZXQgZGVmYXVsdCBIVFRQIHNlY3VyaXR5IGhlYWRlcnMgcmVxdWlyZWQgYnkgUFdBIEtpdFxuICAgIGFwcC51c2UoZGVmYXVsdFB3YUtpdFNlY3VyaXR5SGVhZGVycylcbiAgICAvLyBTZXQgY3VzdG9tIEhUVFAgc2VjdXJpdHkgaGVhZGVyc1xuICAgIGFwcC51c2UoXG4gICAgICAgIGhlbG1ldCh7XG4gICAgICAgICAgICBjb250ZW50U2VjdXJpdHlQb2xpY3k6IHtcbiAgICAgICAgICAgICAgICB1c2VEZWZhdWx0czogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkaXJlY3RpdmVzOiB7XG4gICAgICAgICAgICAgICAgICAgICdpbWctc3JjJzogW1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVmYXVsdCBzb3VyY2UgZm9yIHByb2R1Y3QgaW1hZ2VzIC0gcmVwbGFjZSB3aXRoIHlvdXIgQ0ROXG4gICAgICAgICAgICAgICAgICAgICAgICAnKi5jb21tZXJjZWNsb3VkLnNhbGVzZm9yY2UuY29tJ1xuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICAnc2NyaXB0LXNyYyc6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVzZWQgYnkgdGhlIHNlcnZpY2Ugd29ya2VyIGluIC93b3JrZXIvbWFpbi5qc1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3N0b3JhZ2UuZ29vZ2xlYXBpcy5jb20nXG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICdjb25uZWN0LXNyYyc6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbm5lY3QgdG8gRWluc3RlaW4gQVBJc1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2FwaS5jcXVvdGllbnQuY29tJ1xuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIClcblxuICAgIC8vIEhhbmRsZSB0aGUgcmVkaXJlY3QgZnJvbSBTTEFTIGFzIHRvIGF2b2lkIGVycm9yXG4gICAgYXBwLmdldCgnL2NhbGxiYWNrPyonLCAocmVxLCByZXMpID0+IHtcbiAgICAgICAgLy8gVGhpcyBlbmRwb2ludCBkb2VzIG5vdGhpbmcgYW5kIGlzIG5vdCBleHBlY3RlZCB0byBjaGFuZ2VcbiAgICAgICAgLy8gVGh1cyB3ZSBjYWNoZSBpdCBmb3IgYSB5ZWFyIHRvIG1heGltaXplIHBlcmZvcm1hbmNlXG4gICAgICAgIHJlcy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCBgbWF4LWFnZT0zMTUzNjAwMGApXG4gICAgICAgIHJlcy5zZW5kKClcbiAgICB9KVxuXG4gICAgYXBwLmdldCgnLzpzaG9ydENvZGUvOnRlbmFudElkL29hdXRoMi9qd2tzJywgKHJlcSwgcmVzKSA9PiB7XG4gICAgICAgIGp3a3NDYWNoaW5nKHJlcSwgcmVzLCB7c2hvcnRDb2RlOiByZXEucGFyYW1zLnNob3J0Q29kZSwgdGVuYW50SWQ6IHJlcS5wYXJhbXMudGVuYW50SWR9KVxuICAgIH0pXG5cbiAgICAvLyBIYW5kbGVzIHRoZSBwYXNzd29yZGxlc3MgbG9naW4gY2FsbGJhY2sgcm91dGUuIFNMQVMgbWFrZXMgYSBQT1NUIHJlcXVlc3QgdG8gdGhpc1xuICAgIC8vIGVuZHBvaW50IHNlbmRpbmcgdGhlIGVtYWlsIGFkZHJlc3MgYW5kIHBhc3N3b3JkbGVzcyB0b2tlbi4gVGhlbiB0aGlzIGVuZHBvaW50IGNhbGxzXG4gICAgLy8gdGhlIHNlbmRNYWdpY0xpbmtFbWFpbCBmdW5jdGlvbiB0byBzZW5kIGFuIGVtYWlsIHdpdGggdGhlIHBhc3N3b3JkbGVzcyBsb2dpbiBtYWdpYyBsaW5rLlxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLnNhbGVzZm9yY2UuY29tL2RvY3MvY29tbWVyY2UvY29tbWVyY2UtYXBpL2d1aWRlL3NsYXMtcGFzc3dvcmRsZXNzLWxvZ2luLmh0bWwjcmVjZWl2ZS10aGUtY2FsbGJhY2tcbiAgICBhcHAucG9zdChwYXNzd29yZGxlc3NMb2dpbkNhbGxiYWNrLCAocmVxLCByZXMpID0+IHtcbiAgICAgICAgY29uc3Qgc2xhc0NhbGxiYWNrVG9rZW4gPSByZXEuaGVhZGVyc1sneC1zbGFzLWNhbGxiYWNrLXRva2VuJ11cbiAgICAgICAgY29uc3QgcmVkaXJlY3RVcmwgPSByZXEucXVlcnkucmVkaXJlY3RVcmxcbiAgICAgICAgdmFsaWRhdGVTbGFzQ2FsbGJhY2tUb2tlbihzbGFzQ2FsbGJhY2tUb2tlbikudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBzZW5kTWFnaWNMaW5rRW1haWwoXG4gICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgIHJlcyxcbiAgICAgICAgICAgICAgICBjb25maWcuYXBwLmxvZ2luPy5wYXNzd29yZGxlc3M/LmxhbmRpbmdQYXRoLFxuICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52Lk1BUktFVElOR19DTE9VRF9QQVNTV09SRExFU1NfTE9HSU5fVEVNUExBVEUsXG4gICAgICAgICAgICAgICAgcmVkaXJlY3RVcmxcbiAgICAgICAgICAgIClcbiAgICAgICAgfSlcbiAgICB9KVxuXG4gICAgLy8gSGFuZGxlcyB0aGUgcmVzZXQgcGFzc3dvcmQgY2FsbGJhY2sgcm91dGUuIFNMQVMgbWFrZXMgYSBQT1NUIHJlcXVlc3QgdG8gdGhpc1xuICAgIC8vIGVuZHBvaW50IHNlbmRpbmcgdGhlIGVtYWlsIGFkZHJlc3MgYW5kIHJlc2V0IHBhc3N3b3JkIHRva2VuLiBUaGVuIHRoaXMgZW5kcG9pbnQgY2FsbHNcbiAgICAvLyB0aGUgc2VuZE1hZ2ljTGlua0VtYWlsIGZ1bmN0aW9uIHRvIHNlbmQgYW4gZW1haWwgd2l0aCB0aGUgcmVzZXQgcGFzc3dvcmQgbWFnaWMgbGluay5cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5zYWxlc2ZvcmNlLmNvbS9kb2NzL2NvbW1lcmNlL2NvbW1lcmNlLWFwaS9ndWlkZS9zbGFzLXBhc3N3b3JkLXJlc2V0Lmh0bWwjc2xhcy1wYXNzd29yZC1yZXNldC1mbG93XG4gICAgYXBwLnBvc3QocmVzZXRQYXNzd29yZENhbGxiYWNrLCAocmVxLCByZXMpID0+IHtcbiAgICAgICAgY29uc3Qgc2xhc0NhbGxiYWNrVG9rZW4gPSByZXEuaGVhZGVyc1sneC1zbGFzLWNhbGxiYWNrLXRva2VuJ11cbiAgICAgICAgdmFsaWRhdGVTbGFzQ2FsbGJhY2tUb2tlbihzbGFzQ2FsbGJhY2tUb2tlbikudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBzZW5kTWFnaWNMaW5rRW1haWwoXG4gICAgICAgICAgICAgICAgcmVxLFxuICAgICAgICAgICAgICAgIHJlcyxcbiAgICAgICAgICAgICAgICBjb25maWcuYXBwLmxvZ2luPy5yZXNldFBhc3N3b3JkPy5sYW5kaW5nUGF0aCxcbiAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5NQVJLRVRJTkdfQ0xPVURfUkVTRVRfUEFTU1dPUkRfVEVNUExBVEVcbiAgICAgICAgICAgIClcbiAgICAgICAgfSlcbiAgICB9KVxuXG4gICAgYXBwLmdldCgnL3JvYm90cy50eHQnLCBydW50aW1lLnNlcnZlU3RhdGljRmlsZSgnc3RhdGljL3JvYm90cy50eHQnKSlcbiAgICBhcHAuZ2V0KCcvZmF2aWNvbi5pY28nLCBydW50aW1lLnNlcnZlU3RhdGljRmlsZSgnc3RhdGljL2ljby9mYXZpY29uLmljbycpKVxuXG4gICAgYXBwLmdldCgnL3dvcmtlci5qcygubWFwKT8nLCBydW50aW1lLnNlcnZlU2VydmljZVdvcmtlcilcbiAgICBhcHAuZ2V0KCcqJywgcnVudGltZS5yZW5kZXIpXG59KVxuLy8gU1NSIHJlcXVpcmVzIHRoYXQgd2UgZXhwb3J0IGEgc2luZ2xlIGhhbmRsZXIgZnVuY3Rpb24gY2FsbGVkICdnZXQnLCB0aGF0XG4vLyBzdXBwb3J0cyBBV1MgdXNlIG9mIHRoZSBzZXJ2ZXIgdGhhdCB3ZSBjcmVhdGVkIGFib3ZlLlxuZXhwb3J0IGNvbnN0IGdldCA9IGhhbmRsZXJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFlBQVk7O0FBQUEsSUFBQUEsc0JBQUEsR0FBQUMsT0FBQTtBQUFBQyxNQUFBLENBQUFDLGNBQUEsQ0FBQUMsT0FBQTtFQUFBQyxLQUFBO0FBQUE7QUFBQUQsT0FBQSxDQUFBRSxrQkFBQTtBQUFBRixPQUFBLENBQUFHLFNBQUEsR0FBQUEsU0FBQTtBQUFBSCxPQUFBLENBQUFJLEdBQUE7QUFBQUosT0FBQSxDQUFBSyxXQUFBLEdBQUFBLFdBQUE7QUFBQUwsT0FBQSxDQUFBTSx5QkFBQTtBQUFBLElBQUFDLGtCQUFBLEdBQUFYLHNCQUFBLENBQUFDLE9BQUE7QUFFWixJQUFBVyxPQUFBLEdBQUFaLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBWSxRQUFBLEdBQUFiLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBYSxPQUFBLEdBQUFkLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJ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","map":{"version":3,"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","createRemoteJWKSet","emailLink","get","jwksCaching","validateSlasCallbackToken","_asyncToGenerator2","_crypto","_express","_helmet","_jose","_path","_express2","_middleware","_ssrConfig","_url","_config$app$login","_config$app$login$res","_config$app$login2","_config$app$login2$pa","config","getConfig","options","buildDir","path","resolve","process","cwd","defaultCacheTimeSeconds","mobify","port","protocol","useSLASPrivateClient","encodeNonAsciiHttpHeaders","runtime","getRuntime","marketingCloudToken","marketingCloudTokenExpiration","Date","generateUniqueId","crypto","randomBytes","toString","sendMarketingCloudEmail","_x","_x2","_sendMarketingCloudEmail","apply","arguments","default","emailId","marketingCloudConfig","clientId","clientSecret","subdomain","tokenUrl","tokenResponse","fetch","method","headers","body","JSON","stringify","grant_type","client_id","client_secret","ok","Error","access_token","json","now","emailUrl","emailResponse","Authorization","definitionKey","templateId","recipient","contactKey","to","attributes","magicLink","_x3","_x4","_x5","_emailLink","env","MARKETING_CLOUD_CLIENT_ID","console","warn","MARKETING_CLOUD_CLIENT_SECRET","MARKETING_CLOUD_SUBDOMAIN","resetPasswordCallback","app","login","resetPassword","callbackURI","passwordlessLoginCallback","passwordless","sendMagicLinkEmail","_x6","_x7","_x8","_x9","_x0","_sendMagicLinkEmail","req","res","landingPath","emailTemplate","redirectUrl","_config$app$login5","_config$app$login5$re","_config$app$login6","_config$app$login6$pa","base","email_id","token","encodeURIComponent","emailLinkResponse","send","CLAIM","ISSUER","DELIMITER","throwSlasTokenValidationError","message","code","tenantId","appOrigin","getAppOrigin","appConfig","shortCode","commerceAPI","parameters","configTenantId","organizationId","replace","JWKS_URI","joseCreateRemoteJWKSet","URL","_ref","payload","decodeJwt","subClaim","tokens","split","jwks","jwtVerify","error","_x1","tenantIdRegExp","shortCodeRegExp","_x10","_x11","_x12","_jwksCaching","isValidRequest","test","status","response","set","handler","createHandler","use","express","urlencoded","extended","defaultPwaKitSecurityHeaders","helmet","contentSecurityPolicy","useDefaults","directives","params","post","slasCallbackToken","query","then","_config$app$login3","_config$app$login3$pa","MARKETING_CLOUD_PASSWORDLESS_LOGIN_TEMPLATE","_config$app$login4","_config$app$login4$re","MARKETING_CLOUD_RESET_PASSWORD_TEMPLATE","serveStaticFile","serveServiceWorker","render"],"sourceRoot":"/Users/vupham/pwa-kit-starter-project-29Jun/app/","sources":["ssr.js"],"sourcesContent":["/*\n * Copyright (c) 2023, Salesforce, Inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\n'use strict'\n\nimport crypto from 'crypto'\nimport express from 'express'\nimport helmet from 'helmet'\nimport {createRemoteJWKSet as joseCreateRemoteJWKSet, jwtVerify, decodeJwt} from 'jose'\nimport path from 'path'\nimport {getRuntime} from '@salesforce/pwa-kit-runtime/ssr/server/express'\nimport {defaultPwaKitSecurityHeaders} from '@salesforce/pwa-kit-runtime/utils/middleware'\nimport {getConfig} from '@salesforce/pwa-kit-runtime/utils/ssr-config'\nimport {getAppOrigin} from '@salesforce/pwa-kit-react-sdk/utils/url'\n\nconst config = getConfig()\n\nconst options = {\n    // The build directory (an absolute path)\n    buildDir: path.resolve(process.cwd(), 'build'),\n\n    // The cache time for SSR'd pages (defaults to 600 seconds)\n    defaultCacheTimeSeconds: 600,\n\n    // The contents of the config file for the current environment\n    mobify: config,\n\n    // The port that the local dev server listens on\n    port: 3000,\n\n    // The protocol on which the development Express app listens.\n    // Note that http://localhost is treated as a secure context for development,\n    // except by Safari.\n    protocol: 'http',\n\n    // Option for whether to set up a special endpoint for handling\n    // private SLAS clients\n    // Set this to false if using a SLAS public client\n    // When setting this to true, make sure to also set the PWA_KIT_SLAS_CLIENT_SECRET\n    // environment variable as this endpoint will return HTTP 501 if it is not set\n    useSLASPrivateClient: false,\n\n    // If this is enabled, any HTTP header that has a non ASCII value will be URI encoded\n    // If there any HTTP headers that have been encoded, an additional header will be\n    // passed, `x-encoded-headers`, containing a comma separated list\n    // of the keys of headers that have been encoded\n    // There may be a slight performance loss with requests/responses with large number\n    // of headers as we loop through all the headers to verify ASCII vs non ASCII\n    encodeNonAsciiHttpHeaders: true\n}\n\nconst runtime = getRuntime()\n\n/**\n * Tokens are valid for 20 minutes. We store it at the top level scope to reuse\n * it during the lambda invocation. We'll refresh it after 15 minutes.\n */\nlet marketingCloudToken = ''\nlet marketingCloudTokenExpiration = new Date()\n\n/**\n * Generates a unique ID for the email message.\n *\n * @return {string} A unique ID for the email message.\n */\nfunction generateUniqueId() {\n    return crypto.randomBytes(16).toString('hex')\n}\n\n/**\n * Sends an email to a specified contact using the Marketing Cloud API. The template email must have a\n * `%%magic-link%%` personalization string inserted.\n * https://help.salesforce.com/s/articleView?id=mktg.mc_es_personalization_strings.htm&type=5\n *\n * @param {string} email - The email address of the contact to whom the email will be sent.\n * @param {string} templateId - The ID of the email template to be used for the email.\n * @param {string} magicLink - The magic link to be included in the email.\n *\n * @return {Promise<object>} A promise that resolves to the response object received from the Marketing Cloud API.\n */\nasync function sendMarketingCloudEmail(emailId, marketingCloudConfig) {\n    // Refresh token if expired\n    if (new Date() > marketingCloudTokenExpiration) {\n        const {clientId, clientSecret, subdomain} = marketingCloudConfig\n        const tokenUrl = `https://${subdomain}.auth.marketingcloudapis.com/v2/token`\n        const tokenResponse = await fetch(tokenUrl, {\n            method: 'POST',\n            headers: {'Content-Type': 'application/json'},\n            body: JSON.stringify({\n                grant_type: 'client_credentials',\n                client_id: clientId,\n                client_secret: clientSecret\n            })\n        })\n\n        if (!tokenResponse.ok)\n            throw new Error(\n                'Failed to fetch Marketing Cloud access token. Check your Marketing Cloud credentials and try again.'\n            )\n\n        const {access_token} = await tokenResponse.json()\n        marketingCloudToken = access_token\n        // Set expiration to 15 mins\n        marketingCloudTokenExpiration = new Date(Date.now() + 15 * 60 * 1000)\n    }\n\n    // Send the email\n    const emailUrl = `https://${\n        marketingCloudConfig.subdomain\n    }.rest.marketingcloudapis.com/messaging/v1/email/messages/${generateUniqueId()}`\n    const emailResponse = await fetch(emailUrl, {\n        method: 'POST',\n        headers: {\n            Authorization: `Bearer ${marketingCloudToken}`,\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n            definitionKey: marketingCloudConfig.templateId,\n            recipient: {\n                contactKey: emailId,\n                to: emailId,\n                attributes: {'magic-link': marketingCloudConfig.magicLink}\n            }\n        })\n    })\n\n    if (!emailResponse.ok) throw new Error('Failed to send email to Marketing Cloud')\n\n    return await emailResponse.json()\n}\n\n/**\n * Generates a unique ID, constructs an email message URL, and sends the email to the specified contact\n * using the Marketing Cloud API.\n *\n * @param {string} email - The email address of the contact to whom the email will be sent.\n * @param {string} templateId - The ID of the email template to be used for the email.\n * @param {string} magicLink - The magic link to be included in the email.\n *\n * @return {Promise<object>} A promise that resolves to the response object received from the Marketing Cloud API.\n */\nexport async function emailLink(emailId, templateId, magicLink) {\n    if (!process.env.MARKETING_CLOUD_CLIENT_ID) {\n        console.warn('MARKETING_CLOUD_CLIENT_ID is not set in the environment variables.')\n    }\n\n    if (!process.env.MARKETING_CLOUD_CLIENT_SECRET) {\n        console.warn(' MARKETING_CLOUD_CLIENT_SECRET is not set in the environment variables.')\n    }\n\n    if (!process.env.MARKETING_CLOUD_SUBDOMAIN) {\n        console.warn('MARKETING_CLOUD_SUBDOMAIN is not set in the environment variables.')\n    }\n\n    const marketingCloudConfig = {\n        clientId: process.env.MARKETING_CLOUD_CLIENT_ID,\n        clientSecret: process.env.MARKETING_CLOUD_CLIENT_SECRET,\n        magicLink: magicLink,\n        subdomain: process.env.MARKETING_CLOUD_SUBDOMAIN,\n        templateId: templateId\n    }\n    return await sendMarketingCloudEmail(emailId, marketingCloudConfig)\n}\n\nconst resetPasswordCallback =\n    config.app.login?.resetPassword?.callbackURI || '/reset-password-callback'\nconst passwordlessLoginCallback =\n    config.app.login?.passwordless?.callbackURI || '/passwordless-login-callback'\n\n// Reusable function to handle sending a magic link email.\n// By default, this implementation uses Marketing Cloud.\nasync function sendMagicLinkEmail(req, res, landingPath, emailTemplate, redirectUrl) {\n    // Extract the base URL from the request\n    const base = req.protocol + '://' + req.get('host')\n\n    // Extract the email_id and token from the request body\n    const {email_id, token} = req.body\n\n    // Construct the magic link URL\n    let magicLink = `${base}${landingPath}?token=${encodeURIComponent(token)}`\n    if (landingPath === config.app.login?.resetPassword?.landingPath) {\n        // Add email query parameter for reset password flow\n        magicLink += `&email=${encodeURIComponent(email_id)}`\n    }\n    if (landingPath === config.app.login?.passwordless?.landingPath && redirectUrl) {\n        magicLink += `&redirect_url=${encodeURIComponent(redirectUrl)}`\n    }\n\n    // Call the emailLink function to send an email with the magic link using Marketing Cloud\n    const emailLinkResponse = await emailLink(email_id, emailTemplate, magicLink)\n\n    // Send the response\n    res.send(emailLinkResponse)\n}\n\nconst CLAIM = {\n    ISSUER: 'iss'\n}\n\nconst DELIMITER = {\n    ISSUER: '/'\n}\n\nconst throwSlasTokenValidationError = (message, code) => {\n    throw new Error(`SLAS Token Validation Error: ${message}`, code)\n}\n\nexport const createRemoteJWKSet = (tenantId) => {\n    const appOrigin = getAppOrigin()\n    const {app: appConfig} = getConfig()\n    const shortCode = appConfig.commerceAPI.parameters.shortCode\n    const configTenantId = appConfig.commerceAPI.parameters.organizationId.replace(/^f_ecom_/, '')\n    if (tenantId !== configTenantId) {\n        throw new Error(\n            `The tenant ID in your PWA Kit configuration (\"${configTenantId}\") does not match the tenant ID in the SLAS callback token (\"${tenantId}\").`\n        )\n    }\n    const JWKS_URI = `${appOrigin}/${shortCode}/${tenantId}/oauth2/jwks`\n    return joseCreateRemoteJWKSet(new URL(JWKS_URI))\n}\n\nexport const validateSlasCallbackToken = async (token) => {\n    const payload = decodeJwt(token)\n    const subClaim = payload[CLAIM.ISSUER]\n    const tokens = subClaim.split(DELIMITER.ISSUER)\n    const tenantId = tokens[2]\n    try {\n        const jwks = createRemoteJWKSet(tenantId)\n        const {payload} = await jwtVerify(token, jwks, {})\n        return payload\n    } catch (error) {\n        throwSlasTokenValidationError(error.message, 401)\n    }\n}\n\nconst tenantIdRegExp = /^[a-zA-Z]{4}_([0-9]{3}|s[0-9]{2}|stg|dev|prd)$/\nconst shortCodeRegExp = /^[a-zA-Z0-9-]+$/\n\n/**\n *  Handles JWKS (JSON Web Key Set) caching the JWKS response for 2 weeks.\n *\n * @param {object} req Express request object.\n * @param {object} res Express response object.\n * @param {object} options Options for fetching B2C Commerce API JWKS.\n * @param {string} options.shortCode - The Short Code assigned to the realm.\n * @param {string} options.tenantId - The Tenant ID for the ECOM instance.\n * @returns {Promise<*>} Promise with the JWKS data.\n */\nexport async function jwksCaching(req, res, options) {\n    const {shortCode, tenantId} = options\n\n    const isValidRequest = tenantIdRegExp.test(tenantId) && shortCodeRegExp.test(shortCode)\n    if (!isValidRequest)\n        return res\n            .status(400)\n            .json({error: 'Bad request parameters: Tenant ID or short code is invalid.'})\n    try {\n        const JWKS_URI = `https://${shortCode}.api.commercecloud.salesforce.com/shopper/auth/v1/organizations/f_ecom_${tenantId}/oauth2/jwks`\n        const response = await fetch(JWKS_URI)\n\n        if (!response.ok) {\n            throw new Error('Request failed with status: ' + response.status)\n        }\n\n        // JWKS rotate every 30 days. For now, cache response for 14 days so that\n        // fetches only need to happen twice a month\n        res.set('Cache-Control', 'public, max-age=1209600, stale-while-revalidate=86400')\n\n        return res.json(await response.json())\n    } catch (error) {\n        res.status(400).json({error: `Error while fetching data: ${error.message}`})\n    }\n}\n\nconst {handler} = runtime.createHandler(options, (app) => {\n    app.use(express.json()) // To parse JSON payloads\n    app.use(express.urlencoded({extended: true}))\n    // Set default HTTP security headers required by PWA Kit\n    app.use(defaultPwaKitSecurityHeaders)\n    // Set custom HTTP security headers\n    app.use(\n        helmet({\n            contentSecurityPolicy: {\n                useDefaults: true,\n                directives: {\n                    'img-src': [\n                        // Default source for product images - replace with your CDN\n                        '*.commercecloud.salesforce.com'\n                    ],\n                    'script-src': [\n                        // Used by the service worker in /worker/main.js\n                        'storage.googleapis.com'\n                    ],\n                    'connect-src': [\n                        // Connect to Einstein APIs\n                        'api.cquotient.com'\n                    ]\n                }\n            }\n        })\n    )\n\n    // Handle the redirect from SLAS as to avoid error\n    app.get('/callback?*', (req, res) => {\n        // This endpoint does nothing and is not expected to change\n        // Thus we cache it for a year to maximize performance\n        res.set('Cache-Control', `max-age=31536000`)\n        res.send()\n    })\n\n    app.get('/:shortCode/:tenantId/oauth2/jwks', (req, res) => {\n        jwksCaching(req, res, {shortCode: req.params.shortCode, tenantId: req.params.tenantId})\n    })\n\n    // Handles the passwordless login callback route. SLAS makes a POST request to this\n    // endpoint sending the email address and passwordless token. Then this endpoint calls\n    // the sendMagicLinkEmail function to send an email with the passwordless login magic link.\n    // https://developer.salesforce.com/docs/commerce/commerce-api/guide/slas-passwordless-login.html#receive-the-callback\n    app.post(passwordlessLoginCallback, (req, res) => {\n        const slasCallbackToken = req.headers['x-slas-callback-token']\n        const redirectUrl = req.query.redirectUrl\n        validateSlasCallbackToken(slasCallbackToken).then(() => {\n            sendMagicLinkEmail(\n                req,\n                res,\n                config.app.login?.passwordless?.landingPath,\n                process.env.MARKETING_CLOUD_PASSWORDLESS_LOGIN_TEMPLATE,\n                redirectUrl\n            )\n        })\n    })\n\n    // Handles the reset password callback route. SLAS makes a POST request to this\n    // endpoint sending the email address and reset password token. Then this endpoint calls\n    // the sendMagicLinkEmail function to send an email with the reset password magic link.\n    // https://developer.salesforce.com/docs/commerce/commerce-api/guide/slas-password-reset.html#slas-password-reset-flow\n    app.post(resetPasswordCallback, (req, res) => {\n        const slasCallbackToken = req.headers['x-slas-callback-token']\n        validateSlasCallbackToken(slasCallbackToken).then(() => {\n            sendMagicLinkEmail(\n                req,\n                res,\n                config.app.login?.resetPassword?.landingPath,\n                process.env.MARKETING_CLOUD_RESET_PASSWORD_TEMPLATE\n            )\n        })\n    })\n\n    app.get('/robots.txt', runtime.serveStaticFile('static/robots.txt'))\n    app.get('/favicon.ico', runtime.serveStaticFile('static/ico/favicon.ico'))\n\n    app.get('/worker.js(.map)?', runtime.serveServiceWorker)\n    app.get('*', runtime.render)\n})\n// SSR requires that we export a single handler function called 'get', that\n// supports AWS use of the server that we created above.\nexport const get = handler\n"],"mappings":"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","ignoreList":[]}},"mtime":1751170991002},"{\"assumptions\":{},\"sourceType\":\"unambiguous\",\"sourceRoot\":\"/Users/vupham/pwa-kit-starter-project-29Jun/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vupham/pwa-kit-starter-project-29Jun\",\"filename\":\"/Users/vupham/pwa-kit-starter-project-29Jun/config/default.js\",\"targets\":{\"android\":\"4.4.0\",\"chrome\":\"135.0.0\",\"ios\":\"9.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vupham/pwa-kit-starter-project-29Jun\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-object-assign\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$5\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$7\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"idInterpolationPattern\":\"[sha512:contenthash:base64:6]\",\"ast\":true},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$17\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.27.7:development":{"value":{"code":"/*\n * Copyright (c) 2023, Salesforce, Inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n/* eslint-disable @typescript-eslint/no-var-requires */\nconst sites = require('./sites.js');\nmodule.exports = {\n  app: {\n    // Customize settings for your url\n    url: {\n      // Determine where the siteRef is located. Valid values include 'path|query_param|none'. Defaults to: 'none'\n      // site: 'none',\n      // Determine where the localeRef is located. Valid values include 'path|query_param|none'. Defaults to: 'none'\n      locale: 'none',\n      // This boolean value dictates whether default site or locale values are shown in the url. Defaults to: false\n      // showDefaults: true,\n      // This boolean value dictates whether the plus sign (+) is interpreted as space for query param string. Defaults to: false\n      interpretPlusSignAsSpace: false\n    },\n    login: {\n      passwordless: {\n        // Enables or disables passwordless login for the site. Defaults to: false\n        enabled: false,\n        // The callback URI, which can be an absolute URL (including third-party URIs) or a relative path set up by the developer.\n        // Required in 'callback' mode; if missing, passwordless login defaults to 'sms' mode, which requires Marketing Cloud configuration.\n        // If the env var `PASSWORDLESS_LOGIN_CALLBACK_URI` is set, it will override the config value.\n        callbackURI: process.env.PASSWORDLESS_LOGIN_CALLBACK_URI || '/passwordless-login-callback',\n        // The landing path for passwordless login\n        landingPath: '/passwordless-login-landing'\n      },\n      social: {\n        // Enables or disables social login for the site. Defaults to: false\n        enabled: false,\n        // The third-party identity providers supported by your app. The PWA Kit supports Google and Apple by default.\n        // Additional IDPs will also need to be added to the IDP_CONFIG in the SocialLogin component.\n        idps: ['google', 'apple'],\n        // The redirect URI used after a successful social login authentication.\n        // This should be a relative path set up by the developer.\n        // If the env var `SOCIAL_LOGIN_REDIRECT_URI` is set, it will override the config value.\n        redirectURI: process.env.SOCIAL_LOGIN_REDIRECT_URI || '/social-callback'\n      },\n      resetPassword: {\n        // The callback URI, which can be an absolute URL (including third-party URIs) or a relative path set up by the developer.\n        // If the env var `RESET_PASSWORD_CALLBACK_URI` is set, it will override the config value.\n        callbackURI: process.env.RESET_PASSWORD_CALLBACK_URI || '/reset-password-callback',\n        // The landing path for reset password\n        landingPath: '/reset-password-landing'\n      }\n    },\n    // The default site for your app. This value will be used when a siteRef could not be determined from the url\n    defaultSite: 'RefArch',\n    // Provide aliases for your sites. These will be used in place of your site id when generating paths throughout the application.\n    // siteAliases: {\n    //     RefArch: 'us'\n    // },\n    // The sites for your app, which is imported from sites.js\n    sites,\n    // Commerce api config\n    commerceAPI: {\n      proxyPath: '/mobify/proxy/api',\n      parameters: {\n        clientId: '5670fd3e-d079-4da3-a58c-a900e8a92053',\n        organizationId: 'f_ecom_zyaw_008',\n        shortCode: 'kv7kzm78',\n        siteId: 'RefArch'\n      }\n    },\n    // Einstein api config\n    einsteinAPI: {\n      host: 'https://api.cquotient.com',\n      einsteinId: '',\n      siteId: '',\n      // Flag Einstein activities as coming from a production environment.\n      // By setting this to true, the Einstein activities generated by the environment will appear\n      // in production environment reports\n      isProduction: false\n    }\n  },\n  // This list contains server-side only libraries that you don't want to be compiled by webpack\n  externals: [],\n  // Page not found url for your app\n  pageNotFoundURL: '/page-not-found',\n  // Enables or disables building the files necessary for server-side rendering.\n  ssrEnabled: true,\n  // This list determines which files are available exclusively to the server-side rendering system\n  // and are not available through the /mobify/bundle/ path.\n  ssrOnly: ['ssr.js', 'ssr.js.map', 'node_modules/**/*.*'],\n  // This list determines which files are available to the server-side rendering system\n  // and available through the /mobify/bundle/ path.\n  ssrShared: ['static/ico/favicon.ico', 'static/robots.txt', '**/*.js', '**/*.js.map', '**/*.json'],\n  // Additional parameters that configure Express app behavior.\n  ssrParameters: {\n    ssrFunctionNodeVersion: '22.x',\n    proxyConfigs: [{\n      host: 'kv7kzm78.api.commercecloud.salesforce.com',\n      path: 'api'\n    }, {\n      host: 'zyaw-008.dx.commercecloud.salesforce.com',\n      path: 'ocapi'\n    }]\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJzaXRlcyIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwiYXBwIiwidXJsIiwibG9jYWxlIiwiaW50ZXJwcmV0UGx1c1NpZ25Bc1NwYWNlIiwibG9naW4iLCJwYXNzd29yZGxlc3MiLCJlbmFibGVkIiwiY2FsbGJhY2tVUkkiLCJwcm9jZXNzIiwiZW52IiwiUEFTU1dPUkRMRVNTX0xPR0lOX0NBTExCQUNLX1VSSSIsImxhbmRpbmdQYXRoIiwic29jaWFsIiwiaWRwcyIsInJlZGlyZWN0VVJJIiwiU09DSUFMX0xPR0lOX1JFRElSRUNUX1VSSSIsInJlc2V0UGFzc3dvcmQiLCJSRVNFVF9QQVNTV09SRF9DQUxMQkFDS19VUkkiLCJkZWZhdWx0U2l0ZSIsImNvbW1lcmNlQVBJIiwicHJveHlQYXRoIiwicGFyYW1ldGVycyIsImNsaWVudElkIiwib3JnYW5pemF0aW9uSWQiLCJzaG9ydENvZGUiLCJzaXRlSWQiLCJlaW5zdGVpbkFQSSIsImhvc3QiLCJlaW5zdGVpbklkIiwiaXNQcm9kdWN0aW9uIiwiZXh0ZXJuYWxzIiwicGFnZU5vdEZvdW5kVVJMIiwic3NyRW5hYmxlZCIsInNzck9ubHkiLCJzc3JTaGFyZWQiLCJzc3JQYXJhbWV0ZXJzIiwic3NyRnVuY3Rpb25Ob2RlVmVyc2lvbiIsInByb3h5Q29uZmlncyIsInBhdGgiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dXBoYW0vcHdhLWtpdC1zdGFydGVyLXByb2plY3QtMjlKdW4vY29uZmlnLyIsInNvdXJjZXMiOlsiZGVmYXVsdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IChjKSAyMDIzLCBTYWxlc2ZvcmNlLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEJTRC0zLUNsYXVzZVxuICogRm9yIGZ1bGwgbGljZW5zZSB0ZXh0LCBzZWUgdGhlIExJQ0VOU0UgZmlsZSBpbiB0aGUgcmVwbyByb290IG9yIGh0dHBzOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvQlNELTMtQ2xhdXNlXG4gKi9cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby12YXItcmVxdWlyZXMgKi9cbmNvbnN0IHNpdGVzID0gcmVxdWlyZSgnLi9zaXRlcy5qcycpXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBhcHA6IHtcbiAgICAgICAgLy8gQ3VzdG9taXplIHNldHRpbmdzIGZvciB5b3VyIHVybFxuICAgICAgICB1cmw6IHtcbiAgICAgICAgICAgIC8vIERldGVybWluZSB3aGVyZSB0aGUgc2l0ZVJlZiBpcyBsb2NhdGVkLiBWYWxpZCB2YWx1ZXMgaW5jbHVkZSAncGF0aHxxdWVyeV9wYXJhbXxub25lJy4gRGVmYXVsdHMgdG86ICdub25lJ1xuICAgICAgICAgICAgLy8gc2l0ZTogJ25vbmUnLFxuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHdoZXJlIHRoZSBsb2NhbGVSZWYgaXMgbG9jYXRlZC4gVmFsaWQgdmFsdWVzIGluY2x1ZGUgJ3BhdGh8cXVlcnlfcGFyYW18bm9uZScuIERlZmF1bHRzIHRvOiAnbm9uZSdcbiAgICAgICAgICAgIGxvY2FsZTogJ25vbmUnLFxuICAgICAgICAgICAgLy8gVGhpcyBib29sZWFuIHZhbHVlIGRpY3RhdGVzIHdoZXRoZXIgZGVmYXVsdCBzaXRlIG9yIGxvY2FsZSB2YWx1ZXMgYXJlIHNob3duIGluIHRoZSB1cmwuIERlZmF1bHRzIHRvOiBmYWxzZVxuICAgICAgICAgICAgLy8gc2hvd0RlZmF1bHRzOiB0cnVlLFxuICAgICAgICAgICAgLy8gVGhpcyBib29sZWFuIHZhbHVlIGRpY3RhdGVzIHdoZXRoZXIgdGhlIHBsdXMgc2lnbiAoKykgaXMgaW50ZXJwcmV0ZWQgYXMgc3BhY2UgZm9yIHF1ZXJ5IHBhcmFtIHN0cmluZy4gRGVmYXVsdHMgdG86IGZhbHNlXG4gICAgICAgICAgICBpbnRlcnByZXRQbHVzU2lnbkFzU3BhY2U6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGxvZ2luOiB7XG4gICAgICAgICAgICBwYXNzd29yZGxlc3M6IHtcbiAgICAgICAgICAgICAgICAvLyBFbmFibGVzIG9yIGRpc2FibGVzIHBhc3N3b3JkbGVzcyBsb2dpbiBmb3IgdGhlIHNpdGUuIERlZmF1bHRzIHRvOiBmYWxzZVxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIC8vIFRoZSBjYWxsYmFjayBVUkksIHdoaWNoIGNhbiBiZSBhbiBhYnNvbHV0ZSBVUkwgKGluY2x1ZGluZyB0aGlyZC1wYXJ0eSBVUklzKSBvciBhIHJlbGF0aXZlIHBhdGggc2V0IHVwIGJ5IHRoZSBkZXZlbG9wZXIuXG4gICAgICAgICAgICAgICAgLy8gUmVxdWlyZWQgaW4gJ2NhbGxiYWNrJyBtb2RlOyBpZiBtaXNzaW5nLCBwYXNzd29yZGxlc3MgbG9naW4gZGVmYXVsdHMgdG8gJ3NtcycgbW9kZSwgd2hpY2ggcmVxdWlyZXMgTWFya2V0aW5nIENsb3VkIGNvbmZpZ3VyYXRpb24uXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGVudiB2YXIgYFBBU1NXT1JETEVTU19MT0dJTl9DQUxMQkFDS19VUklgIGlzIHNldCwgaXQgd2lsbCBvdmVycmlkZSB0aGUgY29uZmlnIHZhbHVlLlxuICAgICAgICAgICAgICAgIGNhbGxiYWNrVVJJOlxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5QQVNTV09SRExFU1NfTE9HSU5fQ0FMTEJBQ0tfVVJJIHx8ICcvcGFzc3dvcmRsZXNzLWxvZ2luLWNhbGxiYWNrJyxcbiAgICAgICAgICAgICAgICAvLyBUaGUgbGFuZGluZyBwYXRoIGZvciBwYXNzd29yZGxlc3MgbG9naW5cbiAgICAgICAgICAgICAgICBsYW5kaW5nUGF0aDogJy9wYXNzd29yZGxlc3MtbG9naW4tbGFuZGluZydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzb2NpYWw6IHtcbiAgICAgICAgICAgICAgICAvLyBFbmFibGVzIG9yIGRpc2FibGVzIHNvY2lhbCBsb2dpbiBmb3IgdGhlIHNpdGUuIERlZmF1bHRzIHRvOiBmYWxzZVxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIC8vIFRoZSB0aGlyZC1wYXJ0eSBpZGVudGl0eSBwcm92aWRlcnMgc3VwcG9ydGVkIGJ5IHlvdXIgYXBwLiBUaGUgUFdBIEtpdCBzdXBwb3J0cyBHb29nbGUgYW5kIEFwcGxlIGJ5IGRlZmF1bHQuXG4gICAgICAgICAgICAgICAgLy8gQWRkaXRpb25hbCBJRFBzIHdpbGwgYWxzbyBuZWVkIHRvIGJlIGFkZGVkIHRvIHRoZSBJRFBfQ09ORklHIGluIHRoZSBTb2NpYWxMb2dpbiBjb21wb25lbnQuXG4gICAgICAgICAgICAgICAgaWRwczogWydnb29nbGUnLCAnYXBwbGUnXSxcbiAgICAgICAgICAgICAgICAvLyBUaGUgcmVkaXJlY3QgVVJJIHVzZWQgYWZ0ZXIgYSBzdWNjZXNzZnVsIHNvY2lhbCBsb2dpbiBhdXRoZW50aWNhdGlvbi5cbiAgICAgICAgICAgICAgICAvLyBUaGlzIHNob3VsZCBiZSBhIHJlbGF0aXZlIHBhdGggc2V0IHVwIGJ5IHRoZSBkZXZlbG9wZXIuXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGVudiB2YXIgYFNPQ0lBTF9MT0dJTl9SRURJUkVDVF9VUklgIGlzIHNldCwgaXQgd2lsbCBvdmVycmlkZSB0aGUgY29uZmlnIHZhbHVlLlxuICAgICAgICAgICAgICAgIHJlZGlyZWN0VVJJOiBwcm9jZXNzLmVudi5TT0NJQUxfTE9HSU5fUkVESVJFQ1RfVVJJIHx8ICcvc29jaWFsLWNhbGxiYWNrJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlc2V0UGFzc3dvcmQ6IHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgY2FsbGJhY2sgVVJJLCB3aGljaCBjYW4gYmUgYW4gYWJzb2x1dGUgVVJMIChpbmNsdWRpbmcgdGhpcmQtcGFydHkgVVJJcykgb3IgYSByZWxhdGl2ZSBwYXRoIHNldCB1cCBieSB0aGUgZGV2ZWxvcGVyLlxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBlbnYgdmFyIGBSRVNFVF9QQVNTV09SRF9DQUxMQkFDS19VUklgIGlzIHNldCwgaXQgd2lsbCBvdmVycmlkZSB0aGUgY29uZmlnIHZhbHVlLlxuICAgICAgICAgICAgICAgIGNhbGxiYWNrVVJJOiBwcm9jZXNzLmVudi5SRVNFVF9QQVNTV09SRF9DQUxMQkFDS19VUkkgfHwgJy9yZXNldC1wYXNzd29yZC1jYWxsYmFjaycsXG4gICAgICAgICAgICAgICAgLy8gVGhlIGxhbmRpbmcgcGF0aCBmb3IgcmVzZXQgcGFzc3dvcmRcbiAgICAgICAgICAgICAgICBsYW5kaW5nUGF0aDogJy9yZXNldC1wYXNzd29yZC1sYW5kaW5nJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAvLyBUaGUgZGVmYXVsdCBzaXRlIGZvciB5b3VyIGFwcC4gVGhpcyB2YWx1ZSB3aWxsIGJlIHVzZWQgd2hlbiBhIHNpdGVSZWYgY291bGQgbm90IGJlIGRldGVybWluZWQgZnJvbSB0aGUgdXJsXG4gICAgICAgIGRlZmF1bHRTaXRlOiAnUmVmQXJjaCcsXG4gICAgICAgIC8vIFByb3ZpZGUgYWxpYXNlcyBmb3IgeW91ciBzaXRlcy4gVGhlc2Ugd2lsbCBiZSB1c2VkIGluIHBsYWNlIG9mIHlvdXIgc2l0ZSBpZCB3aGVuIGdlbmVyYXRpbmcgcGF0aHMgdGhyb3VnaG91dCB0aGUgYXBwbGljYXRpb24uXG4gICAgICAgIC8vIHNpdGVBbGlhc2VzOiB7XG4gICAgICAgIC8vICAgICBSZWZBcmNoOiAndXMnXG4gICAgICAgIC8vIH0sXG4gICAgICAgIC8vIFRoZSBzaXRlcyBmb3IgeW91ciBhcHAsIHdoaWNoIGlzIGltcG9ydGVkIGZyb20gc2l0ZXMuanNcbiAgICAgICAgc2l0ZXMsXG4gICAgICAgIC8vIENvbW1lcmNlIGFwaSBjb25maWdcbiAgICAgICAgY29tbWVyY2VBUEk6IHtcbiAgICAgICAgICAgIHByb3h5UGF0aDogJy9tb2JpZnkvcHJveHkvYXBpJyxcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgICAgICAgICBjbGllbnRJZDogJzU2NzBmZDNlLWQwNzktNGRhMy1hNThjLWE5MDBlOGE5MjA1MycsXG4gICAgICAgICAgICAgICAgb3JnYW5pemF0aW9uSWQ6ICdmX2Vjb21fenlhd18wMDgnLFxuICAgICAgICAgICAgICAgIHNob3J0Q29kZTogJ2t2N2t6bTc4JyxcbiAgICAgICAgICAgICAgICBzaXRlSWQ6ICdSZWZBcmNoJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAvLyBFaW5zdGVpbiBhcGkgY29uZmlnXG4gICAgICAgIGVpbnN0ZWluQVBJOiB7XG4gICAgICAgICAgICBob3N0OiAnaHR0cHM6Ly9hcGkuY3F1b3RpZW50LmNvbScsXG4gICAgICAgICAgICBlaW5zdGVpbklkOiAnJyxcbiAgICAgICAgICAgIHNpdGVJZDogJycsXG4gICAgICAgICAgICAvLyBGbGFnIEVpbnN0ZWluIGFjdGl2aXRpZXMgYXMgY29taW5nIGZyb20gYSBwcm9kdWN0aW9uIGVudmlyb25tZW50LlxuICAgICAgICAgICAgLy8gQnkgc2V0dGluZyB0aGlzIHRvIHRydWUsIHRoZSBFaW5zdGVpbiBhY3Rpdml0aWVzIGdlbmVyYXRlZCBieSB0aGUgZW52aXJvbm1lbnQgd2lsbCBhcHBlYXJcbiAgICAgICAgICAgIC8vIGluIHByb2R1Y3Rpb24gZW52aXJvbm1lbnQgcmVwb3J0c1xuICAgICAgICAgICAgaXNQcm9kdWN0aW9uOiBmYWxzZVxuICAgICAgICB9XG4gICAgfSxcbiAgICAvLyBUaGlzIGxpc3QgY29udGFpbnMgc2VydmVyLXNpZGUgb25seSBsaWJyYXJpZXMgdGhhdCB5b3UgZG9uJ3Qgd2FudCB0byBiZSBjb21waWxlZCBieSB3ZWJwYWNrXG4gICAgZXh0ZXJuYWxzOiBbXSxcbiAgICAvLyBQYWdlIG5vdCBmb3VuZCB1cmwgZm9yIHlvdXIgYXBwXG4gICAgcGFnZU5vdEZvdW5kVVJMOiAnL3BhZ2Utbm90LWZvdW5kJyxcbiAgICAvLyBFbmFibGVzIG9yIGRpc2FibGVzIGJ1aWxkaW5nIHRoZSBmaWxlcyBuZWNlc3NhcnkgZm9yIHNlcnZlci1zaWRlIHJlbmRlcmluZy5cbiAgICBzc3JFbmFibGVkOiB0cnVlLFxuICAgIC8vIFRoaXMgbGlzdCBkZXRlcm1pbmVzIHdoaWNoIGZpbGVzIGFyZSBhdmFpbGFibGUgZXhjbHVzaXZlbHkgdG8gdGhlIHNlcnZlci1zaWRlIHJlbmRlcmluZyBzeXN0ZW1cbiAgICAvLyBhbmQgYXJlIG5vdCBhdmFpbGFibGUgdGhyb3VnaCB0aGUgL21vYmlmeS9idW5kbGUvIHBhdGguXG4gICAgc3NyT25seTogWydzc3IuanMnLCAnc3NyLmpzLm1hcCcsICdub2RlX21vZHVsZXMvKiovKi4qJ10sXG4gICAgLy8gVGhpcyBsaXN0IGRldGVybWluZXMgd2hpY2ggZmlsZXMgYXJlIGF2YWlsYWJsZSB0byB0aGUgc2VydmVyLXNpZGUgcmVuZGVyaW5nIHN5c3RlbVxuICAgIC8vIGFuZCBhdmFpbGFibGUgdGhyb3VnaCB0aGUgL21vYmlmeS9idW5kbGUvIHBhdGguXG4gICAgc3NyU2hhcmVkOiBbXG4gICAgICAgICdzdGF0aWMvaWNvL2Zhdmljb24uaWNvJyxcbiAgICAgICAgJ3N0YXRpYy9yb2JvdHMudHh0JyxcbiAgICAgICAgJyoqLyouanMnLFxuICAgICAgICAnKiovKi5qcy5tYXAnLFxuICAgICAgICAnKiovKi5qc29uJ1xuICAgIF0sXG4gICAgLy8gQWRkaXRpb25hbCBwYXJhbWV0ZXJzIHRoYXQgY29uZmlndXJlIEV4cHJlc3MgYXBwIGJlaGF2aW9yLlxuICAgIHNzclBhcmFtZXRlcnM6IHtcbiAgICAgICAgc3NyRnVuY3Rpb25Ob2RlVmVyc2lvbjogJzIyLngnLFxuICAgICAgICBwcm94eUNvbmZpZ3M6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBob3N0OiAna3Y3a3ptNzguYXBpLmNvbW1lcmNlY2xvdWQuc2FsZXNmb3JjZS5jb20nLFxuICAgICAgICAgICAgICAgIHBhdGg6ICdhcGknXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGhvc3Q6ICd6eWF3LTAwOC5keC5jb21tZXJjZWNsb3VkLnNhbGVzZm9yY2UuY29tJyxcbiAgICAgICAgICAgICAgICBwYXRoOiAnb2NhcGknXG4gICAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUEsS0FBSyxHQUFHQyxPQUFPLENBQUMsWUFBWSxDQUFDO0FBQ25DQyxNQUFNLENBQUNDLE9BQU8sR0FBRztFQUNiQyxHQUFHLEVBQUU7SUFDRDtJQUNBQyxHQUFHLEVBQUU7TUFDRDtNQUNBO01BQ0E7TUFDQUMsTUFBTSxFQUFFLE1BQU07TUFDZDtNQUNBO01BQ0E7TUFDQUMsd0JBQXdCLEVBQUU7SUFDOUIsQ0FBQztJQUNEQyxLQUFLLEVBQUU7TUFDSEMsWUFBWSxFQUFFO1FBQ1Y7UUFDQUMsT0FBTyxFQUFFLEtBQUs7UUFDZDtRQUNBO1FBQ0E7UUFDQUMsV0FBVyxFQUNQQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsK0JBQStCLElBQUksOEJBQThCO1FBQ2pGO1FBQ0FDLFdBQVcsRUFBRTtNQUNqQixDQUFDO01BQ0RDLE1BQU0sRUFBRTtRQUNKO1FBQ0FOLE9BQU8sRUFBRSxLQUFLO1FBQ2Q7UUFDQTtRQUNBTyxJQUFJLEVBQUUsQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDO1FBQ3pCO1FBQ0E7UUFDQTtRQUNBQyxXQUFXLEVBQUVOLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDTSx5QkFBeUIsSUFBSTtNQUMxRCxDQUFDO01BQ0RDLGFBQWEsRUFBRTtRQUNYO1FBQ0E7UUFDQVQsV0FBVyxFQUFFQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ1EsMkJBQTJCLElBQUksMEJBQTBCO1FBQ2xGO1FBQ0FOLFdBQVcsRUFBRTtNQUNqQjtJQUNKLENBQUM7SUFDRDtJQUNBTyxXQUFXLEVBQUUsU0FBUztJQUN0QjtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0F0QixLQUFLO0lBQ0w7SUFDQXVCLFdBQVcsRUFBRTtNQUNUQyxTQUFTLEVBQUUsbUJBQW1CO01BQzlCQyxVQUFVLEVBQUU7UUFDUkMsUUFBUSxFQUFFLHNDQUFzQztRQUNoREMsY0FBYyxFQUFFLGlCQUFpQjtRQUNqQ0MsU0FBUyxFQUFFLFVBQVU7UUFDckJDLE1BQU0sRUFBRTtNQUNaO0lBQ0osQ0FBQztJQUNEO0lBQ0FDLFdBQVcsRUFBRTtNQUNUQyxJQUFJLEVBQUUsMkJBQTJCO01BQ2pDQyxVQUFVLEVBQUUsRUFBRTtNQUNkSCxNQUFNLEVBQUUsRUFBRTtNQUNWO01BQ0E7TUFDQTtNQUNBSSxZQUFZLEVBQUU7SUFDbEI7RUFDSixDQUFDO0VBQ0Q7RUFDQUMsU0FBUyxFQUFFLEVBQUU7RUFDYjtFQUNBQyxlQUFlLEVBQUUsaUJBQWlCO0VBQ2xDO0VBQ0FDLFVBQVUsRUFBRSxJQUFJO0VBQ2hCO0VBQ0E7RUFDQUMsT0FBTyxFQUFFLENBQUMsUUFBUSxFQUFFLFlBQVksRUFBRSxxQkFBcUIsQ0FBQztFQUN4RDtFQUNBO0VBQ0FDLFNBQVMsRUFBRSxDQUNQLHdCQUF3QixFQUN4QixtQkFBbUIsRUFDbkIsU0FBUyxFQUNULGFBQWEsRUFDYixXQUFXLENBQ2Q7RUFDRDtFQUNBQyxhQUFhLEVBQUU7SUFDWEMsc0JBQXNCLEVBQUUsTUFBTTtJQUM5QkMsWUFBWSxFQUFFLENBQ1Y7TUFDSVYsSUFBSSxFQUFFLDJDQUEyQztNQUNqRFcsSUFBSSxFQUFFO0lBQ1YsQ0FBQyxFQUNEO01BQ0lYLElBQUksRUFBRSwwQ0FBMEM7TUFDaERXLElBQUksRUFBRTtJQUNWLENBQUM7RUFFVDtBQUNKLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["sites","require","module","exports","app","url","locale","interpretPlusSignAsSpace","login","passwordless","enabled","callbackURI","process","env","PASSWORDLESS_LOGIN_CALLBACK_URI","landingPath","social","idps","redirectURI","SOCIAL_LOGIN_REDIRECT_URI","resetPassword","RESET_PASSWORD_CALLBACK_URI","defaultSite","commerceAPI","proxyPath","parameters","clientId","organizationId","shortCode","siteId","einsteinAPI","host","einsteinId","isProduction","externals","pageNotFoundURL","ssrEnabled","ssrOnly","ssrShared","ssrParameters","ssrFunctionNodeVersion","proxyConfigs","path"],"sourceRoot":"/Users/vupham/pwa-kit-starter-project-29Jun/config/","sources":["default.js"],"sourcesContent":["/*\n * Copyright (c) 2023, Salesforce, Inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n/* eslint-disable @typescript-eslint/no-var-requires */\nconst sites = require('./sites.js')\nmodule.exports = {\n    app: {\n        // Customize settings for your url\n        url: {\n            // Determine where the siteRef is located. Valid values include 'path|query_param|none'. Defaults to: 'none'\n            // site: 'none',\n            // Determine where the localeRef is located. Valid values include 'path|query_param|none'. Defaults to: 'none'\n            locale: 'none',\n            // This boolean value dictates whether default site or locale values are shown in the url. Defaults to: false\n            // showDefaults: true,\n            // This boolean value dictates whether the plus sign (+) is interpreted as space for query param string. Defaults to: false\n            interpretPlusSignAsSpace: false\n        },\n        login: {\n            passwordless: {\n                // Enables or disables passwordless login for the site. Defaults to: false\n                enabled: false,\n                // The callback URI, which can be an absolute URL (including third-party URIs) or a relative path set up by the developer.\n                // Required in 'callback' mode; if missing, passwordless login defaults to 'sms' mode, which requires Marketing Cloud configuration.\n                // If the env var `PASSWORDLESS_LOGIN_CALLBACK_URI` is set, it will override the config value.\n                callbackURI:\n                    process.env.PASSWORDLESS_LOGIN_CALLBACK_URI || '/passwordless-login-callback',\n                // The landing path for passwordless login\n                landingPath: '/passwordless-login-landing'\n            },\n            social: {\n                // Enables or disables social login for the site. Defaults to: false\n                enabled: false,\n                // The third-party identity providers supported by your app. The PWA Kit supports Google and Apple by default.\n                // Additional IDPs will also need to be added to the IDP_CONFIG in the SocialLogin component.\n                idps: ['google', 'apple'],\n                // The redirect URI used after a successful social login authentication.\n                // This should be a relative path set up by the developer.\n                // If the env var `SOCIAL_LOGIN_REDIRECT_URI` is set, it will override the config value.\n                redirectURI: process.env.SOCIAL_LOGIN_REDIRECT_URI || '/social-callback'\n            },\n            resetPassword: {\n                // The callback URI, which can be an absolute URL (including third-party URIs) or a relative path set up by the developer.\n                // If the env var `RESET_PASSWORD_CALLBACK_URI` is set, it will override the config value.\n                callbackURI: process.env.RESET_PASSWORD_CALLBACK_URI || '/reset-password-callback',\n                // The landing path for reset password\n                landingPath: '/reset-password-landing'\n            }\n        },\n        // The default site for your app. This value will be used when a siteRef could not be determined from the url\n        defaultSite: 'RefArch',\n        // Provide aliases for your sites. These will be used in place of your site id when generating paths throughout the application.\n        // siteAliases: {\n        //     RefArch: 'us'\n        // },\n        // The sites for your app, which is imported from sites.js\n        sites,\n        // Commerce api config\n        commerceAPI: {\n            proxyPath: '/mobify/proxy/api',\n            parameters: {\n                clientId: '5670fd3e-d079-4da3-a58c-a900e8a92053',\n                organizationId: 'f_ecom_zyaw_008',\n                shortCode: 'kv7kzm78',\n                siteId: 'RefArch'\n            }\n        },\n        // Einstein api config\n        einsteinAPI: {\n            host: 'https://api.cquotient.com',\n            einsteinId: '',\n            siteId: '',\n            // Flag Einstein activities as coming from a production environment.\n            // By setting this to true, the Einstein activities generated by the environment will appear\n            // in production environment reports\n            isProduction: false\n        }\n    },\n    // This list contains server-side only libraries that you don't want to be compiled by webpack\n    externals: [],\n    // Page not found url for your app\n    pageNotFoundURL: '/page-not-found',\n    // Enables or disables building the files necessary for server-side rendering.\n    ssrEnabled: true,\n    // This list determines which files are available exclusively to the server-side rendering system\n    // and are not available through the /mobify/bundle/ path.\n    ssrOnly: ['ssr.js', 'ssr.js.map', 'node_modules/**/*.*'],\n    // This list determines which files are available to the server-side rendering system\n    // and available through the /mobify/bundle/ path.\n    ssrShared: [\n        'static/ico/favicon.ico',\n        'static/robots.txt',\n        '**/*.js',\n        '**/*.js.map',\n        '**/*.json'\n    ],\n    // Additional parameters that configure Express app behavior.\n    ssrParameters: {\n        ssrFunctionNodeVersion: '22.x',\n        proxyConfigs: [\n            {\n                host: 'kv7kzm78.api.commercecloud.salesforce.com',\n                path: 'api'\n            },\n            {\n                host: 'zyaw-008.dx.commercecloud.salesforce.com',\n                path: 'ocapi'\n            }\n        ]\n    }\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMA,KAAK,GAAGC,OAAO,CAAC,YAAY,CAAC;AACnCC,MAAM,CAACC,OAAO,GAAG;EACbC,GAAG,EAAE;IACD;IACAC,GAAG,EAAE;MACD;MACA;MACA;MACAC,MAAM,EAAE,MAAM;MACd;MACA;MACA;MACAC,wBAAwB,EAAE;IAC9B,CAAC;IACDC,KAAK,EAAE;MACHC,YAAY,EAAE;QACV;QACAC,OAAO,EAAE,KAAK;QACd;QACA;QACA;QACAC,WAAW,EACPC,OAAO,CAACC,GAAG,CAACC,+BAA+B,IAAI,8BAA8B;QACjF;QACAC,WAAW,EAAE;MACjB,CAAC;MACDC,MAAM,EAAE;QACJ;QACAN,OAAO,EAAE,KAAK;QACd;QACA;QACAO,IAAI,EAAE,CAAC,QAAQ,EAAE,OAAO,CAAC;QACzB;QACA;QACA;QACAC,WAAW,EAAEN,OAAO,CAACC,GAAG,CAACM,yBAAyB,IAAI;MAC1D,CAAC;MACDC,aAAa,EAAE;QACX;QACA;QACAT,WAAW,EAAEC,OAAO,CAACC,GAAG,CAACQ,2BAA2B,IAAI,0BAA0B;QAClF;QACAN,WAAW,EAAE;MACjB;IACJ,CAAC;IACD;IACAO,WAAW,EAAE,SAAS;IACtB;IACA;IACA;IACA;IACA;IACAtB,KAAK;IACL;IACAuB,WAAW,EAAE;MACTC,SAAS,EAAE,mBAAmB;MAC9BC,UAAU,EAAE;QACRC,QAAQ,EAAE,sCAAsC;QAChDC,cAAc,EAAE,iBAAiB;QACjCC,SAAS,EAAE,UAAU;QACrBC,MAAM,EAAE;MACZ;IACJ,CAAC;IACD;IACAC,WAAW,EAAE;MACTC,IAAI,EAAE,2BAA2B;MACjCC,UAAU,EAAE,EAAE;MACdH,MAAM,EAAE,EAAE;MACV;MACA;MACA;MACAI,YAAY,EAAE;IAClB;EACJ,CAAC;EACD;EACAC,SAAS,EAAE,EAAE;EACb;EACAC,eAAe,EAAE,iBAAiB;EAClC;EACAC,UAAU,EAAE,IAAI;EAChB;EACA;EACAC,OAAO,EAAE,CAAC,QAAQ,EAAE,YAAY,EAAE,qBAAqB,CAAC;EACxD;EACA;EACAC,SAAS,EAAE,CACP,wBAAwB,EACxB,mBAAmB,EACnB,SAAS,EACT,aAAa,EACb,WAAW,CACd;EACD;EACAC,aAAa,EAAE;IACXC,sBAAsB,EAAE,MAAM;IAC9BC,YAAY,EAAE,CACV;MACIV,IAAI,EAAE,2CAA2C;MACjDW,IAAI,EAAE;IACV,CAAC,EACD;MACIX,IAAI,EAAE,0CAA0C;MAChDW,IAAI,EAAE;IACV,CAAC;EAET;AACJ,CAAC","ignoreList":[]}},"mtime":1751170991005},"{\"assumptions\":{},\"sourceType\":\"unambiguous\",\"sourceRoot\":\"/Users/vupham/pwa-kit-starter-project-29Jun/config/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/vupham/pwa-kit-starter-project-29Jun\",\"filename\":\"/Users/vupham/pwa-kit-starter-project-29Jun/config/sites.js\",\"targets\":{\"android\":\"4.4.0\",\"chrome\":\"135.0.0\",\"ios\":\"9.0.0\"},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/vupham/pwa-kit-starter-project-29Jun\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-object-assign\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"regenerator\":true},\"externalDependencies\":[]},{\"key\":\"syntax-dynamic-import\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$5\",\"visitor\":{\"Program\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"proposal-optional-chaining\",\"visitor\":{\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]}},\"options\":{},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$7\",\"visitor\":{\"Program\":{\"enter\":[null],\"exit\":[null]},\"JSXOpeningElement\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"idInterpolationPattern\":\"[sha512:contenthash:base64:6]\",\"ast\":true},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$12\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/vupham/pwa-kit-starter-project-29Jun/babel.config.js$0$17\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.27.7:development":{"value":{"code":"/*\n * Copyright (c) 2023, Salesforce, Inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\n// Provide the sites for your app. Each site includes site id, and its localization configuration.\n// You can also provide aliases for your locale. They will be used in place of your locale id when generating paths across the app\nmodule.exports = [{\n  id: 'RefArch',\n  l10n: {\n    supportedCurrencies: ['USD'],\n    defaultCurrency: 'USD',\n    defaultLocale: 'en-US',\n    supportedLocales: [{\n      id: 'en-US',\n      // alias: 'us',\n      preferredCurrency: 'USD'\n    }]\n  }\n}];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwiaWQiLCJsMTBuIiwic3VwcG9ydGVkQ3VycmVuY2llcyIsImRlZmF1bHRDdXJyZW5jeSIsImRlZmF1bHRMb2NhbGUiLCJzdXBwb3J0ZWRMb2NhbGVzIiwicHJlZmVycmVkQ3VycmVuY3kiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy92dXBoYW0vcHdhLWtpdC1zdGFydGVyLXByb2plY3QtMjlKdW4vY29uZmlnLyIsInNvdXJjZXMiOlsic2l0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIENvcHlyaWdodCAoYykgMjAyMywgU2FsZXNmb3JjZSwgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBCU0QtMy1DbGF1c2VcbiAqIEZvciBmdWxsIGxpY2Vuc2UgdGV4dCwgc2VlIHRoZSBMSUNFTlNFIGZpbGUgaW4gdGhlIHJlcG8gcm9vdCBvciBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL0JTRC0zLUNsYXVzZVxuICovXG5cbi8vIFByb3ZpZGUgdGhlIHNpdGVzIGZvciB5b3VyIGFwcC4gRWFjaCBzaXRlIGluY2x1ZGVzIHNpdGUgaWQsIGFuZCBpdHMgbG9jYWxpemF0aW9uIGNvbmZpZ3VyYXRpb24uXG4vLyBZb3UgY2FuIGFsc28gcHJvdmlkZSBhbGlhc2VzIGZvciB5b3VyIGxvY2FsZS4gVGhleSB3aWxsIGJlIHVzZWQgaW4gcGxhY2Ugb2YgeW91ciBsb2NhbGUgaWQgd2hlbiBnZW5lcmF0aW5nIHBhdGhzIGFjcm9zcyB0aGUgYXBwXG5tb2R1bGUuZXhwb3J0cyA9IFtcbiAgICB7XG4gICAgICAgIGlkOiAnUmVmQXJjaCcsXG4gICAgICAgIGwxMG46IHtcbiAgICAgICAgICAgIHN1cHBvcnRlZEN1cnJlbmNpZXM6IFsnVVNEJ10sXG4gICAgICAgICAgICBkZWZhdWx0Q3VycmVuY3k6ICdVU0QnLFxuICAgICAgICAgICAgZGVmYXVsdExvY2FsZTogJ2VuLVVTJyxcbiAgICAgICAgICAgIHN1cHBvcnRlZExvY2FsZXM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiAnZW4tVVMnLFxuICAgICAgICAgICAgICAgICAgICAvLyBhbGlhczogJ3VzJyxcbiAgICAgICAgICAgICAgICAgICAgcHJlZmVycmVkQ3VycmVuY3k6ICdVU0QnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXVxuICAgICAgICB9XG4gICAgfVxuXVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBQSxNQUFNLENBQUNDLE9BQU8sR0FBRyxDQUNiO0VBQ0lDLEVBQUUsRUFBRSxTQUFTO0VBQ2JDLElBQUksRUFBRTtJQUNGQyxtQkFBbUIsRUFBRSxDQUFDLEtBQUssQ0FBQztJQUM1QkMsZUFBZSxFQUFFLEtBQUs7SUFDdEJDLGFBQWEsRUFBRSxPQUFPO0lBQ3RCQyxnQkFBZ0IsRUFBRSxDQUNkO01BQ0lMLEVBQUUsRUFBRSxPQUFPO01BQ1g7TUFDQU0saUJBQWlCLEVBQUU7SUFDdkIsQ0FBQztFQUVUO0FBQ0osQ0FBQyxDQUNKIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["module","exports","id","l10n","supportedCurrencies","defaultCurrency","defaultLocale","supportedLocales","preferredCurrency"],"sourceRoot":"/Users/vupham/pwa-kit-starter-project-29Jun/config/","sources":["sites.js"],"sourcesContent":["/*\n * Copyright (c) 2023, Salesforce, Inc.\n * All rights reserved.\n * SPDX-License-Identifier: BSD-3-Clause\n * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause\n */\n\n// Provide the sites for your app. Each site includes site id, and its localization configuration.\n// You can also provide aliases for your locale. They will be used in place of your locale id when generating paths across the app\nmodule.exports = [\n    {\n        id: 'RefArch',\n        l10n: {\n            supportedCurrencies: ['USD'],\n            defaultCurrency: 'USD',\n            defaultLocale: 'en-US',\n            supportedLocales: [\n                {\n                    id: 'en-US',\n                    // alias: 'us',\n                    preferredCurrency: 'USD'\n                }\n            ]\n        }\n    }\n]\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACAA,MAAM,CAACC,OAAO,GAAG,CACb;EACIC,EAAE,EAAE,SAAS;EACbC,IAAI,EAAE;IACFC,mBAAmB,EAAE,CAAC,KAAK,CAAC;IAC5BC,eAAe,EAAE,KAAK;IACtBC,aAAa,EAAE,OAAO;IACtBC,gBAAgB,EAAE,CACd;MACIL,EAAE,EAAE,OAAO;MACX;MACAM,iBAAiB,EAAE;IACvB,CAAC;EAET;AACJ,CAAC,CACJ","ignoreList":[]}},"mtime":1751170991006}}