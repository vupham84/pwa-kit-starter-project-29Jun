"use strict";

var _react = _interopRequireDefault(require("react"));
var _react2 = require("@testing-library/react");
var _index = _interopRequireDefault(require("./index"));
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
/*
 * Copyright (c) 2021, salesforce.com, inc.
 * All rights reserved.
 * SPDX-License-Identifier: BSD-3-Clause
 * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/BSD-3-Clause
 */

describe('Document', () => {
  test('Renders correctly', () => {
    const style = /*#__PURE__*/_react.default.createElement("link", {
      key: "stylesheet",
      rel: "stylesheet",
      href: "style.css"
    });
    const script = /*#__PURE__*/_react.default.createElement("script", {
      key: "script",
      src: "script.js"
    });
    const sprite = /*#__PURE__*/_react.default.createElement("svg", {
      id: "__SVG_SPRITE_NODE__"
    });
    const html = '<p>Hello world</p>';
    const bodyAttributes = {
      className: 'root'
    };
    const htmlAttributes = {
      lang: 'en'
    };
    (0, _react2.render)( /*#__PURE__*/_react.default.createElement(_index.default, {
      head: [style],
      html: html,
      afterBodyStart: [sprite],
      beforeBodyEnd: [script],
      htmlAttributes: htmlAttributes,
      bodyAttributes: bodyAttributes
    }));
    const scriptTag = document.querySelector('script');
    const svgTag = document.querySelector('svg');
    const styleTag = document.querySelector('link');
    // by default, React Testing Library append the test component into a body tag, since our component is a full DOM
    // there will be two body tags in the DOM, we only want to check the second one
    const bodyTag = document.querySelectorAll('body')[1];
    // it looks like it returns two html collection, the first one is the React Testing library, the second one is our component we are testing
    const htmlTag = document.getElementsByTagName('html')[1];
    expect(svgTag).toBeInTheDocument();
    expect(scriptTag).toBeInTheDocument();
    expect(styleTag).toBeInTheDocument();
    expect(_react2.screen.getByText(/hello world/i)).toBeInTheDocument();
    expect(bodyTag).toHaveAttribute('class', 'root');
    expect(htmlTag).toHaveAttribute('lang', 'en');
  });
});